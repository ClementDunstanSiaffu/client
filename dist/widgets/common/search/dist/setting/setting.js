System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui","jimu-theme"],(function(e,t){var s={},n={},a={},i={};return{setters:[function(e){s.Immutable=e.Immutable,s.LinkType=e.LinkType,s.React=e.React,s.css=e.css,s.defaultMessages=e.defaultMessages,s.jsx=e.jsx},function(e){n.LinkSelector=e.LinkSelector,n.OpenTypes=e.OpenTypes,n.SearchDataSetting=e.SearchDataSetting,n.SearchDataType=e.SearchDataType,n.SearchGeneralSetting=e.SearchGeneralSetting,n.SearchServiceType=e.SearchServiceType,n.SearchSuggestionSetting=e.SearchSuggestionSetting,n.SettingCollapse=e.SettingCollapse,n.SettingRow=e.SettingRow,n.SettingSection=e.SettingSection},function(e){a.Checkbox=e.Checkbox,a.Switch=e.Switch,a.TextInput=e.TextInput,a.defaultMessages=e.defaultMessages,a.hooks=e.hooks},function(e){i.useTheme=e.useTheme}],execute:function(){e((()=>{var e={48891:e=>{"use strict";e.exports=s},34796:e=>{"use strict";e.exports=i},30726:e=>{"use strict";e.exports=a},77756:e=>{"use strict";e.exports=n}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var o={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(o),r.d(o,{default:()=>g});var e,t,s,n=r(48891),a=r(77756);!function(e){e.ResultPanel="Result_Panel",e.OtherWidgets="Other_Widgets"}(e||(e={})),function(e){e.Style1="Style1",e.Style2="Style2"}(t||(t={})),function(e){e.None="",e.Init="init",e.Loading="loading",e.Loaded="loaded",e.Warning="warning",e.Error="error"}(s||(s={}));var i=r(30726);const l={searchResult:"Search result",arrangementStyle:"Arrangement style",showSearchResult:"Show search results in",resultPanel:"Result panel",otherWidgets:"Other widgets",autoSelect:"Auto select the first result",redirectSearchResult:"Redirect if search result is not empty",notSetCorrectle:"The search or display field is not set correctly.",selectedField:"{fieldNumber} Selected",searchExample:"Example: {url}",locatorSourceErrorHint:"The URL you entered is invalid or inaccessible",locatorUrlError:"Locator URL is not set correctly",maximumResults:"Maximum display results per source",outputDsLabel:"{label} result",searchBoxTip:"Search box",searchIconTip:"Search icon"};var c=r(34796);const u=t=>{const s=i.hooks.useTranslate(l,i.defaultMessages,n.defaultMessages),r=(0,c.useTheme)(),o=n.css`
    .check-box-label {
      color: ${r.colors.palette.dark[800]}
    }
    .search-setting-con {
      padding-left: 0;
      padding-right: 0;
    }
    .divider-line {
      padding-bottom: 0;
    }
    .checkbox-con .jimu-widget-setting--row-label{
      max-width: 100%;
    }
  `,{config:u,id:g,useDataSources:S,onSettingChange:d}=t,{searchResultView:h,hint:p,resultMaxNumber:m,linkParam:x,isAutoSelectFirstResult:f}=u,[b,R]=n.React.useState(!1),[v,y]=n.React.useState(!1),[j,w]=n.React.useState(m),[C,T]=n.React.useState((0,n.Immutable)({}));n.React.useEffect((()=>{k()}),[u]);const k=()=>{const e={maxSuggestions:null==u?void 0:u.maxSuggestions,isUseCurrentLoation:null==u?void 0:u.isUseCurrentLoation,isShowRecentSearches:null==u?void 0:u.isShowRecentSearches,recentSearchesMaxNumber:null==u?void 0:u.recentSearchesMaxNumber};T((0,n.Immutable)(e))},O=(e,t)=>{d({id:g,config:u.setIn(e,t)})},N=e=>0===(null==e?void 0:e.length)||Number(e)&&Number(e)>0;return(0,n.jsx)(a.SettingSection,{title:s("generalSearchOption"),css:o},(0,n.jsx)(a.SearchGeneralSetting,{id:g,hint:p,onSettingChange:e=>{O(["hint"],e)}}),(0,n.jsx)("div",null,(0,n.jsx)(a.SettingSection,{className:"search-setting-con"},(0,n.jsx)(a.SettingRow,null,(0,n.jsx)(a.SettingCollapse,{label:s("searchSuggestion"),isOpen:b,onRequestOpen:()=>R(!0),onRequestClose:()=>R(!1),level:1},(0,n.jsx)(a.SearchSuggestionSetting,{id:g,settingConfig:C,onSettingChange:e=>{if(!e)return!1;const t=u.merge(e);d({id:g,config:t})}})))),b&&(0,n.jsx)(a.SettingSection,{className:"divider-line"})),(0,n.jsx)(a.SettingRow,null,(0,n.jsx)(a.SettingCollapse,{label:s("searchResult"),isOpen:v,onRequestOpen:()=>y(!0),onRequestClose:()=>y(!1),level:1},(0,n.jsx)(a.SettingRow,{label:s("resultPanel"),className:"mt-2"},(0,n.jsx)(i.Switch,{checked:h===e.ResultPanel,onChange:t=>{(t=>{const s=t?e.ResultPanel:e.OtherWidgets;O(["searchResultView"],s)})(h===e.OtherWidgets)}})),h===e.ResultPanel&&(0,n.jsx)(a.SettingRow,{flow:"wrap",className:"checkbox-con",label:s("maximumResults")},(0,n.jsx)(i.TextInput,{size:"sm",value:j,onChange:e=>{const t=e.target.value;N(t)&&w(t)},onAcceptValue:e=>{e||w(e=m||6),N(e)&&O(["resultMaxNumber"],Number(e))},className:"w-100"})),h===e.ResultPanel&&(0,n.jsx)(a.SettingRow,null,(0,n.jsx)(i.Checkbox,{checked:f,onClick:e=>{const t=e.currentTarget;t&&O(["isAutoSelectFirstResult"],t.checked)},className:"mr-1","aria-label":s("autoSelect")}),(0,n.jsx)("span",{className:"check-box-label"},s("autoSelect"))),h===e.OtherWidgets&&(0,n.jsx)(a.SettingRow,{className:"d-block",flow:"wrap",label:s("redirectSearchResult")},(0,n.jsx)(a.LinkSelector,{onSettingConfirm:e=>{e&&O(["linkParam"],e)},linkParam:x,useDataSources:S,widgetId:g,hiddenLinks:(0,n.Immutable)([n.LinkType.WebAddress,n.LinkType.PrintPreview]),openTypes:(0,n.Immutable)([a.OpenTypes.CurrentWindow])})))))},g=e=>{const{config:t,id:s,portalUrl:i,onSettingChange:r,useDataSources:o}=e,l=n.css`
    .suggestion-setting-con  {
      padding-bottom: 0;
    }
  `,c=e=>{var t;const s=[];return null===(t=null==e?void 0:e.datasourceConfig)||void 0===t||t.forEach((e=>{(null==e?void 0:e.searchServiceType)===a.SearchServiceType.GeocodeService&&s.push(null==e?void 0:e.useUtility)})),s};return(0,n.jsx)("div",{className:"widget-setting-search jimu-widget-search",css:l},(0,n.jsx)(a.SearchDataSetting,{id:s,portalUrl:i,useDataSources:o,createOutputDs:!0,onSettingChange:e=>{if(!e)return!1;const n=null==t?void 0:t.setIn(["datasourceConfig"],e);r({id:s,config:n})},onOutputDsSettingChange:(e,n)=>{if(!n)return!1;const a=null==t?void 0:t.setIn(["datasourceConfig"],n);r({id:s,config:a,useUtilities:c(a)},e)},datasourceConfig:null==t?void 0:t.datasourceConfig,searchDataSettingType:a.SearchDataType.Both}),(0,n.jsx)(u,{id:s,config:t,onSettingChange:r,useDataSources:o}))}})(),o})())}}}));