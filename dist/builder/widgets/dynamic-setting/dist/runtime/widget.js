System.register(["jimu-core","jimu-core/dnd","jimu-for-builder","jimu-for-builder/templates","jimu-layouts/layout-builder","jimu-layouts/layout-runtime","jimu-theme","jimu-ui","jimu-ui/advanced/resource-selector","jimu-ui/advanced/setting-components","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker","jimu-ui/basic/list-tree","jimu-ui/basic/sql-expression-runtime"],(function(e,t){var i={},s={},o={},n={},a={},r={},l={},c={},p={},d={},g={},h={},u={},m={};return{setters:[function(e){i.APP_FRAME_NAME_IN_BUILDER=e.APP_FRAME_NAME_IN_BUILDER,i.AnimationPlayMode=e.AnimationPlayMode,i.AnimationType=e.AnimationType,i.AppMode=e.AppMode,i.BrowserSizeMode=e.BrowserSizeMode,i.DataActionManager=e.DataActionManager,i.DialogInteractionType=e.DialogInteractionType,i.DialogMode=e.DialogMode,i.DialogPosition=e.DialogPosition,i.ErrorBoundary=e.ErrorBoundary,i.Immutable=e.Immutable,i.LayoutItemType=e.LayoutItemType,i.LayoutType=e.LayoutType,i.LinkType=e.LinkType,i.PageMode=e.PageMode,i.PagePart=e.PagePart,i.PageType=e.PageType,i.React=e.React,i.ReactRedux=e.ReactRedux,i.WidgetManager=e.WidgetManager,i.WidgetType=e.WidgetType,i.appActions=e.appActions,i.appConfigUtils=e.appConfigUtils,i.classNames=e.classNames,i.css=e.css,i.defaultMessages=e.defaultMessages,i.getAppStore=e.getAppStore,i.getMessageTypeLabel=e.getMessageTypeLabel,i.i18n=e.i18n,i.injectIntl=e.injectIntl,i.jsx=e.jsx,i.lodash=e.lodash,i.moduleLoader=e.moduleLoader,i.polished=e.polished,i.urlUtils=e.urlUtils,i.utils=e.utils,i.version=e.version},function(e){s.interact=e.interact},function(e){o.AppDataActionManager=e.AppDataActionManager,o.AppMessageManager=e.AppMessageManager,o.WidgetSettingManager=e.WidgetSettingManager,o.appConfigUtils=e.appConfigUtils,o.builderAppSync=e.builderAppSync,o.getAppConfigAction=e.getAppConfigAction,o.helpUtils=e.helpUtils,o.templateUtils=e.templateUtils,o.utils=e.utils},function(e){n.getScreenTemplates=e.getScreenTemplates},function(e){a.ColumnLayoutItemSetting=e.ColumnLayoutItemSetting,a.FixedLayoutItemSetting=e.FixedLayoutItemSetting,a.FlowLayoutItemSetting=e.FlowLayoutItemSetting,a.FlowLayoutSetting=e.FlowLayoutSetting,a.RowLayoutItemSetting=e.RowLayoutItemSetting},function(e){r.DEFAULT_AUTOPLAY_INTERVAL=e.DEFAULT_AUTOPLAY_INTERVAL,r.LayoutItemSizeModes=e.LayoutItemSizeModes,r.searchUtils=e.searchUtils,r.utils=e.utils},function(e){l.withTheme=e.withTheme},function(e){c.Button=e.Button,c.ButtonGroup=e.ButtonGroup,c.Checkbox=e.Checkbox,c.Collapse=e.Collapse,c.DistanceUnits=e.DistanceUnits,c.Dropdown=e.Dropdown,c.DropdownButton=e.DropdownButton,c.DropdownItem=e.DropdownItem,c.DropdownMenu=e.DropdownMenu,c.FillType=e.FillType,c.Icon=e.Icon,c.Label=e.Label,c.Link=e.Link,c.Loading=e.Loading,c.LoadingType=e.LoadingType,c.MultiSelect=e.MultiSelect,c.NumericInput=e.NumericInput,c.PanelHeader=e.PanelHeader,c.Radio=e.Radio,c.SVG=e.SVG,c.Select=e.Select,c.Slider=e.Slider,c.Switch=e.Switch,c.Tab=e.Tab,c.Tabs=e.Tabs,c.TextArea=e.TextArea,c.TextInput=e.TextInput,c.Tooltip=e.Tooltip,c.defaultMessages=e.defaultMessages,c.utils=e.utils},function(e){p.IconPicker=e.IconPicker},function(e){d.CollapsableRadio=e.CollapsableRadio,d.DirectionSelector=e.DirectionSelector,d.LinkSelectorSidePopper=e.LinkSelectorSidePopper,d.OpenTypes=e.OpenTypes,d.SettingCollapse=e.SettingCollapse,d.SettingRow=e.SettingRow,d.SettingSection=e.SettingSection,d.SidePopper=e.SidePopper,d.TemplateSelector=e.TemplateSelector},function(e){g.AnimationSettingComponent=e.AnimationSettingComponent,g.BackgroundSetting=e.BackgroundSetting,g.BorderRadiusSetting=e.BorderRadiusSetting,g.BorderSetting=e.BorderSetting,g.BoxShadowSetting=e.BoxShadowSetting,g.InputUnit=e.InputUnit,g.Padding=e.Padding,g.SizeEditor=e.SizeEditor},function(e){h.ThemeColorPicker=e.ThemeColorPicker},function(e){u.List=e.List,u.TreeItemActionType=e.TreeItemActionType},function(e){m.getJimuFieldNamesBySqlExpression=e.getJimuFieldNamesBySqlExpression}],execute:function(){e((()=>{var e={8371:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m6.036 12.157 8.01-8.01a.5.5 0 1 1 .707.707l-8.01 8.01a1 1 0 0 1-1.415 0L1.146 8.682a.5.5 0 1 1 .708-.707l4.182 4.182Z" fill="#000"></path></svg>'},748:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5Zm-9 0a3.501 3.501 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5ZM15.5 11l-5 1-3 4-1-9.5 9 4.5Zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38-2.517.503Z" fill="#000"></path></svg>'},5537:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 13H1a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1h-4l.78 2.342a.5.5 0 0 1-.474.658H4.694a.5.5 0 0 1-.475-.658L5 13ZM1 3h14v9H1V3Zm5.054 10-.667 2h5.226l-.667-2H6.054Z" fill="#000"></path></svg>'},3817:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 1H7v2h2V1ZM9 5H7v2h2V5ZM7 9h2v2H7V9ZM9 13H7v2h2v-2Z" fill="#000"></path></svg>'},3210:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 13a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M4 5a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5Zm1 0h6v10H5V5Z" fill="#000"></path></svg>'},5369:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z" fill="#000"></path></svg>'},1553:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35.151.722.257 1.34.316 1.852.374.16.725.362 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 21.98 21.98 0 0 1-1.49 1.194 5.17 5.17 0 0 1-.007 1.183l1.464 1.119a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 22.445 22.445 0 0 1-1.807-.66c-.325.233-.679.43-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21.019 21.019 0 0 1-.317-1.853 5.34 5.34 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546c.567-.49 1.063-.888 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196c.719.233 1.321.453 1.807.66.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994h2.839Zm-.365 1H6.985l-.28 1.866-.467.19c-.235.095-.46.21-.672.34l-.207.136-.42.293-.476-.197c-.328-.137-.718-.281-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4.127 4.127 0 0 0-.021.816l.014.144.058.492-.419.294c-.288.203-.615.451-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29c.204.146.42.274.645.384l.228.103.474.199.059.49c.04.338.103.731.19 1.177l.043.219h2.088l.282-1.867.466-.19c.236-.095.46-.21.672-.34l.207-.136.419-.293.476.198c.33.136.72.28 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4.131 4.131 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18.1 18.1 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.496 4.496 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49c-.032-.27-.08-.576-.14-.916l-.094-.48Zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" fill="#000"></path></svg>'},9694:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.04 2a.242.242 0 0 0-.04.143v12.714c0 .073.023.12.04.143h9.92a.241.241 0 0 0 .04-.143V2.143A.241.241 0 0 0 12.96 2H3.04ZM3 1c-.552 0-1 .512-1 1.143v12.714C2 15.488 2.448 16 3 16h10c.552 0 1-.512 1-1.143V2.143C14 1.512 13.552 1 13 1H3Z" fill="#000"></path></svg>'},8683:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 5H2v6h4V5ZM1 4v8h6V4H1ZM14 5h-4v6h4V5ZM9 4v8h6V4H9Z" fill="#000"></path></svg>'},760:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 2h12v4H2V2ZM1 7V1h14v6H1Zm1 3h12v4H2v-4Zm-1 5V9h14v6H1Z" fill="#000"></path></svg>'},3211:e=>{e.exports='<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1ZM15.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1ZM18 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM17 10.5a.5.5 0 0 0-.5-.5h-13a.5.5 0 0 0 0 1h13a.5.5 0 0 0 .5-.5ZM17 14.5a.5.5 0 0 0-.5-.5h-7a.5.5 0 0 0 0 1h7a.5.5 0 0 0 .5-.5Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h16Zm0 1H2a1 1 0 0 0-.993.883L1 2v2h18V2a1 1 0 0 0-.883-.993L18 1Zm1 4H1v13a1 1 0 0 0 .883.993L2 19h16a1 1 0 0 0 .993-.883L19 18V5Z" fill="#000"></path></svg>'},3401:e=>{e.exports='<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1ZM4.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1ZM7 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM3 10.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5ZM3 14.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h16Zm0 1H2a1 1 0 0 0-.993.883L1 2v2h18V2a1 1 0 0 0-.883-.993L18 1Zm1 4H1v13a1 1 0 0 0 .883.993L2 19h16a1 1 0 0 0 .993-.883L19 18V5Z" fill="#000"></path></svg>'},4786:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m1.373 8 2.07-2.071.83.828L2.2 8.828a3.515 3.515 0 0 0 4.97 4.971l2.072-2.071.828.828L8 14.627A4.686 4.686 0 1 1 1.373 8ZM13.799 7.172l-2.071 2.07.828.83L14.627 8A4.686 4.686 0 1 0 8 1.373l-2.071 2.07.828.83L8.828 2.2a3.515 3.515 0 0 1 4.971 4.97Z" fill="#000"></path><path d="M5.515 9.657a.586.586 0 0 0 .828.828l4.142-4.142a.586.586 0 0 0-.828-.828L5.515 9.657Z" fill="#000"></path></svg>'},9788:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .538.538 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.538.538 0 0 1 0-.738Z" fill="#000"></path></svg>'},1407:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.347 2.146a.485.485 0 0 1 0 .708L5.76 8l5.587 5.146a.486.486 0 0 1 0 .708.538.538 0 0 1-.738 0l-5.956-5.5a.485.485 0 0 1 0-.708l5.956-5.5a.538.538 0 0 1 .738 0Z" fill="#000"></path></svg>'},4201:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 14a.5.5 0 0 0 0-1h-6l3.953-3.459a.5.5 0 0 0-.658-.752L8 11.234V1.5a.5.5 0 0 0-1 0v9.734L4.206 8.789a.5.5 0 0 0-.659.752L7.5 13h-6a.5.5 0 0 0 0 1h12Z" fill="#000"></path></svg>'},4703:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 0a.5.5 0 0 0-.5.5v14a.5.5 0 0 0 1 0V.5a.5.5 0 0 0-.5-.5ZM0 7.5c0 .291.231.527.516.527h3.508L2.527 9.6a.535.535 0 0 0 0 .746.508.508 0 0 0 .73 0L6 7.5 3.257 4.654a.508.508 0 0 0-.73 0 .535.535 0 0 0 0 .746l1.497 1.573H.516A.522.522 0 0 0 0 7.5Zm15 0a.522.522 0 0 1-.516.527h-3.508L12.473 9.6a.535.535 0 0 1 0 .746.508.508 0 0 1-.73 0L9 7.5l2.743-2.846a.508.508 0 0 1 .73 0 .535.535 0 0 1 0 .746l-1.497 1.573h3.508c.285 0 .516.236.516.527Z" fill="#000"></path></svg>'},1528:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 13.5a.5.5 0 0 0 1 0v-6l3.459 3.953a.5.5 0 0 0 .752-.658L3.766 8H13.5a.5.5 0 0 0 0-1H3.766l2.445-2.794a.5.5 0 1 0-.752-.659L2 7.5v-6a.5.5 0 0 0-1 0v12Z" fill="#000"></path></svg>'},7319:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 1.5a.5.5 0 0 0-1 0v6L9.541 3.547a.5.5 0 1 0-.752.658L11.234 7H1.5a.5.5 0 0 0 0 1h9.734l-2.445 2.794a.5.5 0 1 0 .752.659L13 7.5v6a.5.5 0 0 0 1 0v-12Z" fill="#000"></path></svg>'},3166:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 1a.5.5 0 0 0 0 1h6L3.547 5.459a.5.5 0 1 0 .658.752L7 3.766V13.5a.5.5 0 0 0 1 0V3.766l2.794 2.445a.5.5 0 1 0 .659-.752L7.5 2h6a.5.5 0 0 0 0-1h-12Z" fill="#000"></path></svg>'},5234:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 2h4v4H2V2ZM1 7V1h6v6H1Zm1 3h4v4H2v-4Zm-1 5V9h6v6H1ZM14 2h-4v4h4V2ZM9 1v6h6V1H9Zm2.5 14v-2.5H9v-1h2.5V9h1v2.5H15v1h-2.5V15h-1Z" fill="#000"></path></svg>'},5339:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746L8.746 8Z" fill="#000"></path></svg>'},9395:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.973 11.484c0 .285.236.516.527.516a.522.522 0 0 0 .527-.516V1.976L10.6 4.473c.206.202.54.202.746 0a.508.508 0 0 0 0-.73L7.5 0 3.654 3.743a.508.508 0 0 0 0 .73c.206.202.54.202.746 0l2.573-2.497v9.508ZM1 8v7h13V8h1v8H0V8h1Z" fill="#000"></path></svg>'},840:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 0A3.5 3.5 0 0 1 11 3.5V6h1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h1V3.5A3.5 3.5 0 0 1 7.5 0ZM5 6h5V3.5a2.5 2.5 0 0 0-2.336-2.495L7.5 1a2.5 2.5 0 0 0-2.495 2.336L5 3.5V6Zm6 1H3v8h9V7h-1Zm-3.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" fill="#000"></path></svg>'},4750:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5Z" fill="#000"></path></svg>'},224:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Zm-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707l-4.137-4.137Z" fill="#000"></path></svg>'},4357:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0v-6ZM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1Zm0 3V1H5v2h6Zm1.895 1h-9.79l.8 11h8.19l.8-11Z" fill="#000"></path></svg>'},7322:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 3.5a3.5 3.5 0 1 0-7 0V6H3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1h-2V3.5l.005-.164A2.5 2.5 0 0 1 12.5 1l.164.005A2.5 2.5 0 0 1 15 3.5a.5.5 0 0 0 1 0ZM9 7H3v8h9V7H9Zm-1.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" fill="#000"></path></svg>'},1397:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm1 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-7.676 2.228H7.34c-.213-1.138.621-2.13 1.375-3.025C9.28 6.532 9.8 5.914 9.8 5.328 9.8 4.5 9.2 3.9 7.976 3.9c-.816 0-1.572.36-2.268 1.092l-.648-.6C5.852 3.552 6.788 3 8.096 3c1.692 0 2.772.864 2.772 2.244 0 .864-.652 1.628-1.3 2.387-.71.831-1.413 1.655-1.244 2.597Zm.3 2.172c0 .48-.348.792-.768.792-.432 0-.78-.312-.78-.792 0-.48.348-.804.78-.804.42 0 .768.324.768.804Z" fill="#000"></path></svg>'},8866:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5Z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16Zm0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14Z" fill="#000"></path></svg>'},6450:e=>{e.exports='<svg viewBox="0 0 68 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="9" width="6" height="6" rx="2" fill="#6A6A6A"></rect><path fill="#6A6A6A" d="M14 10h50v4H14z"></path></svg>'},6717:e=>{e.exports='<svg viewBox="0 0 68 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="9" width="6" height="6" rx="2" fill="#6A6A6A"></rect><rect x="51" y="9" width="13" height="6" rx="2" fill="#6A6A6A"></rect><path fill="#6A6A6A" d="M14 10h33v4H14z"></path></svg>'},5241:e=>{e.exports='<svg viewBox="0 0 68 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="9" width="6" height="6" rx="2" fill="#6A6A6A"></rect><rect x="51" y="16" width="13" height="6" rx="2" fill="#6A6A6A"></rect><path fill="#6A6A6A" d="M14 10h33v4H14z"></path></svg>'},7893:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkF1dG88L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTA2LjAwMDAwMCwgLTMwOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwNS4wMDAwMDAsIDMwNy4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMS4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwNyIgaGVpZ2h0PSI2OCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNTI1MjUyIiB4PSI2IiB5PSIxNCIgd2lkdGg9IjkwIiBoZWlnaHQ9IjQwIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM2QTZBNkEiIHg9IjEwMSIgeT0iMyIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIHJ4PSIxLjUiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},4479:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkN1c3RvbTwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODcuMDAwMDAwLCAtMzA4LjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzg2LjAwMDAwMCwgMzA3LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAxLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNTI1MjUyIiB4PSIyOCIgeT0iMTQiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0MCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjMjgyODI4IiB4PSI4NyIgeT0iMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjY4Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxsaW5lIHgxPSI4NyIgeTE9IjAiIHgyPSI4NyIgeTI9IjY4IiBzdHJva2U9IiM1MjUyNTIiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1kYXNoYXJyYXk9IjQsNCI+PC9saW5lPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjMjgyODI4IiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPGxpbmUgeDE9IjIwIiB5MT0iMCIgeDI9IjIwIiB5Mj0iNjgiIHN0cm9rZT0iIzUyNTI1MiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWRhc2hhcnJheT0iNCw0Ij48L2xpbmU+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM2QTZBNkEiIHg9IjEwMSIgeT0iMyIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIHJ4PSIxLjUiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},8891:e=>{"use strict";e.exports=i},4020:e=>{"use strict";e.exports=s},3137:e=>{"use strict";e.exports=o},6262:e=>{"use strict";e.exports=n},7282:e=>{"use strict";e.exports=a},4758:e=>{"use strict";e.exports=r},4796:e=>{"use strict";e.exports=l},726:e=>{"use strict";e.exports=c},663:e=>{"use strict";e.exports=p},7756:e=>{"use strict";e.exports=d},5505:e=>{"use strict";e.exports=g},1362:e=>{"use strict";e.exports=h},9587:e=>{"use strict";e.exports=u},5506:e=>{"use strict";e.exports=m}},t={};function f(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,f),o.exports}f.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return f.d(t,{a:t}),t},f.d=(e,t)=>{for(var i in t)f.o(t,i)&&!f.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},f.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),f.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.p="";var v={};return f.p=window.jimuConfig.baseUrl,(()=>{"use strict";f.r(v),f.d(v,{default:()=>Qt});var e=f(8891),t=f(3137),i=f(726);class s extends e.React.PureComponent{constructor(){super(...arguments),this.formatMessage=e=>this.props.formatMessage(e),this.onSettingChange=(e,i)=>(0,t.getAppConfigAction)().editWidget(e,i).exec(),this.renderWidgetSetting=s=>{const o=this.props.widgetsSettingRuntimeInfo[s]&&this.props.widgetsSettingRuntimeInfo[s].isClassLoaded?t.WidgetSettingManager.getInstance().getWidgetSettingClass(s):null;return o&&this.props.widgetJson.config?e.React.createElement(e.ErrorBoundary,null,e.React.createElement(o,{key:s,widgetId:s,onSettingChange:this.onSettingChange})):e.React.createElement(i.Loading,{type:i.LoadingType.Secondary})}}componentDidUpdate(){this.loadWidgetSettingClass()}componentDidMount(){this.loadWidgetSettingClass()}loadWidgetSettingClass(){const{widgetId:e}=this.props;e&&!t.WidgetSettingManager.getInstance().getWidgetSettingClass(e)&&t.WidgetSettingManager.getInstance().loadWidgetSettingClass(e)}render(){if(!this.props.widgetJson)return e.React.createElement(i.Loading,{type:i.LoadingType.Secondary});const{widgetId:t}=this.props;return e.React.createElement("div",{className:"setting-container h-100"},t?this.renderWidgetSetting(t):e.React.createElement("div",null,"  ",this.formatMessage("noWidget")))}}const o=e.ReactRedux.connect(((e,t)=>({widgetJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.widgets[t.widgetId]})))(s);var n=f(7756),a=f(1362),r=f(5505);const l={width:110};class c extends e.React.PureComponent{constructor(s){super(s),this.isOpen=()=>{const{pagePart:e,pageId:t}=this.props,i=this.getAppConfig();return"body"===e||!!(i&&i.pages[t]&&i[e]&&i.pages[t][e])},this.formatMessage=e=>this.props.formatMessage(e),this.onSwitchChange=()=>{const{pageId:i,pagePart:s,emptyLayout:o}=this.props,n=this.getAppConfig(),a=n.pages[i];let r=n[s];const l=(0,t.getAppConfigAction)();if(!r){const t=e.appConfigUtils.getUniqueId(n,"layout"),i=(0,e.Immutable)(Object.assign(Object.assign({},o),{id:t,type:e.LayoutType.FixedLayout})).setIn(["setting","lockDescendants"],!0);r=(0,e.Immutable)({}).setIn(["layout",e.BrowserSizeMode.Large],t).setIn(["height",e.BrowserSizeMode.Large],75),"header"===s?l.editHeader(r,[i]):l.editFooter(r,[i])}const c=a.set(s,!a[s]);l.editPage(c).exec(),"body"===s||c[s]||t.builderAppSync.publichActivePagePartChangeToApp(e.PagePart.Body),this.setState({isOpen:c[s]})},this.onHeightChange=e=>{const s=i.utils.stringOfLinearUnit(e),{pagePart:o,browserSizeMode:n}=this.props,a=this.getAppConfig();"header"===o?(0,t.getAppConfigAction)().editHeader(a.header.setIn(["height",n],s)).exec():(0,t.getAppConfigAction)().editFooter(a.footer.setIn(["height",n],s)).exec()},this.onStickHeaderChange=e=>{const i=this.getAppConfig();(0,t.getAppConfigAction)().editHeader(i.header.set("sticky",e.target.checked)).exec()},this.onBackgroundColorChange=e=>{const{pageId:i,pagePart:s}=this.props,o=this.getAppConfig(),n=o.pages[i];"body"===s?(0,t.getAppConfigAction)().editPage(n.set("bodyBackgroundColor",e)).exec():"header"===s?(0,t.getAppConfigAction)().editHeader(o.header.set("backgroundColor",e)).exec():(0,t.getAppConfigAction)().editFooter(o.footer.set("backgroundColor",e)).exec()},this.state={isOpen:this.isOpen()}}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}}componentDidUpdate(e){if(this.props.pageId!==e.pageId){const{pageJson:e,pagePart:t}=this.props;this.setState({isOpen:"body"===t||e&&e[t]})}}render(){var t,s,o,c,p,d,g,h,u;const m={body:this.formatMessage("body"),header:this.formatMessage("header"),footer:this.formatMessage("footer")},{pageId:f,pagePart:v,browserSizeMode:x,theme:w,header:b}=this.props,y=this.getAppConfig(),I=y.pages[f];let S;S="body"===v?I.bodyBackgroundColor:null===(t=y[v])||void 0===t?void 0:t.backgroundColor,!S&&w&&(S="header"===v?null===(s=w.header)||void 0===s?void 0:s.bg:"footer"===v?null===(o=w.footer)||void 0===o?void 0:o.bg:null===(c=w.body)||void 0===c?void 0:c.bg);const j=e.React.createElement("div",{className:"setting-title d-flex justify-content-between"},e.React.createElement("div",null,e.React.createElement("span",null,m[this.props.pagePart])),e.React.createElement("div",{className:"d-flex align-items-center"},"body"===v?null:e.React.createElement(i.Switch,{checked:this.isOpen(),onChange:this.onSwitchChange,"aria-label":m[this.props.pagePart]}))),C=y.mainSizeMode,A=null===(d=null===(p=y[v])||void 0===p?void 0:p.height)||void 0===d?void 0:d[x],M=null===(h=null===(g=y[v])||void 0===g?void 0:g.height)||void 0===h?void 0:h[C],T=i.utils.stringOfLinearUnit(null!==(u=null!=A?A:M)&&void 0!==u?u:75);return e.React.createElement(n.SettingSection,{title:j,role:"group","aria-label":m[this.props.pagePart]},e.React.createElement(i.Collapse,{isOpen:this.state.isOpen},"body"===v?null:e.React.createElement(n.SettingRow,{label:`${this.formatMessage("dynamicHeight")}`},e.React.createElement(r.InputUnit,{value:T,min:0,onChange:this.onHeightChange,style:l,"aria-label":`${this.formatMessage("dynamicHeight")}`})),e.React.createElement(n.SettingRow,{label:this.formatMessage("dsFill")},e.React.createElement(a.ThemeColorPicker,{specificTheme:w,value:S,onChange:this.onBackgroundColorChange})),"header"===v&&I.mode===e.PageMode.AutoScroll&&e.React.createElement(n.SettingRow,{flow:"wrap"},e.React.createElement(i.Label,{centric:!0},e.React.createElement(i.Checkbox,{className:"mr-2",checked:Boolean(null==b?void 0:b.sticky),onChange:this.onStickHeaderChange}),this.formatMessage("keepFixedOnScroll")))))}}var p=f(7282),d=f(4758),g=f(8866),h=f.n(g);const u=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:h()},o))},m={};class x extends e.React.PureComponent{constructor(i){super(i),this.onMaxWidthChange=e=>{let i=this.props.pageJson;i=i.set("maxWidth",e),(0,t.getAppConfigAction)().editPage(i).exec()},this.formatMessage=e=>this.props.formatMessage(e),this.setPageWidthModeAuto=()=>{let e=this.props.pageJson;e=e.without("maxWidth"),(0,t.getAppConfigAction)().editPage(e).exec()},this.setPageWidthModeFixed=()=>{let e=this.props.pageJson;e=e.set("maxWidth",1024),(0,t.getAppConfigAction)().editPage(e).exec()},this.openWithDialogChanged=e=>{let i=this.props.pageJson;i=i.set("autoOpenDialogId",e.target.value),(0,t.getAppConfigAction)().editPage(i).exec()},this.onEffectSettingChange=(i,s)=>{const{pageJson:o}=this.props;(0,t.getAppConfigAction)().editPage(o.set("oneByOneEffect",s)).exec(),(null==s?void 0:s.type)!==e.AnimationType.None&&t.builderAppSync.publishAnimationPreviewToApp({pageId:o.id,playMode:i,id:Symbol("preview animation")})},this.previewAnimation=i=>{const{pageJson:s}=this.props;s.oneByOneEffect&&s.oneByOneEffect.type!==e.AnimationType.None&&t.builderAppSync.publishAnimationPreviewToApp({pageId:s.id,playMode:i,id:Symbol("preview animation")})},this.state={isSetImageUrl:!1,currentImgUrlInput:""},this.fileInput=e.React.createRef()}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}}layoutSetting(){var t;const{pageId:i}=this.props,s=this.getAppConfig(),o=s.pages[i];if(o&&o.layout){const i=d.searchUtils.findLayoutId(o.layout,null===(t=(0,e.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.browserSizeMode,s.mainSizeMode),n=s.layouts[i];if(n&&n.type===e.LayoutType.FlowLayout)return(0,e.jsx)(p.FlowLayoutSetting,{layoutId:i,formatMessage:this.props.formatMessage})}}getDialogList(){const t=[{value:"",index:-1,label:this.formatMessage("none")}],i=this.props.dialogs;return i&&(Object.keys(i).forEach((s=>{i[s].isSplash||i[s].mode!==e.DialogMode.Fixed||t.push({value:s,index:i[s].index,label:i[s].label})})),t.sort(((e,t)=>e.index-t.index))),t}getStyle(){const{theme:t}=this.props;return e.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    input, select {
      width: 130px;
      max-width: 130px;
    }
    .setting-row-label{
      line-height: 30px;
      font-size: 0.8125rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: ${t.colors.palette.dark[400]};
    }
    .content-width-item {
      width: calc(50% - 4px);
      .img-container {
        width: auto;
        height: auto;
        cursor: pointer;
        outline: 1px solid ${t.colors.palette.light[800]};
        background-color: ${t.colors.white} !important;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 5px;
        &.active {
          outline: 2px solid ${t.colors.palette.primary[600]};
        }
      }
      span {
        overflow-x: hidden;
        text-overflow: ellipsis;
        width: 100%;
      }
    }

    `}render(){const{pageMode:t,maxWidth:s,pageJson:o}=this.props;if(!o)return null;const a=this.props.pageJson.autoOpenDialogId||"",l=o.oneByOneEffect,p=o.maxWidth>0?0:1;return(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)("div",{className:"setting-row-label"},this.formatMessage("openWithWindow"),(0,e.jsx)(i.Tooltip,{title:this.formatMessage("openWithWindowTip"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,type:"tertiary",className:"d-inline jimu-outline-inside"},(0,e.jsx)(u,null)))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(i.Select,{size:"sm",value:a,onChange:this.openWithDialogChanged,"aria-label":this.formatMessage("openWithWindow")},this.getDialogList().map(((t,i)=>(0,e.jsx)("option",{value:t.value,key:i,selected:t.value===a},t.label)))))),t===e.PageMode.AutoScroll&&(0,e.jsx)(n.SettingSection,{role:"group",title:this.formatMessage("contentWidth"),"aria-label":this.formatMessage("contentWidth")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex w-100 justify-content-between"},(0,e.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},(0,e.jsx)(i.Button,{icon:!0,type:"tertiary",className:"img-container p-0 "+(0===p?"active":""),"aria-label":this.formatMessage("dsCustom"),"aria-pressed":0===p,onClick:this.setPageWidthModeFixed},(0,e.jsx)(i.Icon,{autoFlip:!0,width:0===p?105:107,height:0===p?66:68,icon:f(4479)})),(0,e.jsx)("span",{className:"text-center"},this.formatMessage("dsCustom"))),(0,e.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},(0,e.jsx)(i.Button,{icon:!0,type:"tertiary",className:"img-container p-0 "+(1===p?"active":""),"aria-label":this.formatMessage("dsAuto"),"aria-pressed":1===p,onClick:this.setPageWidthModeAuto},(0,e.jsx)(i.Icon,{autoFlip:!0,width:1===p?105:107,height:1===p?66:68,icon:f(7893)})),(0,e.jsx)("span",{className:"text-center"},this.formatMessage("dsAuto"))))),0===p&&(0,e.jsx)(n.SettingRow,{label:this.formatMessage("maxWidth")},(0,e.jsx)(i.NumericInput,{"aria-label":this.formatMessage("maxWidth"),className:"setting-input-select",min:300,onChange:this.onMaxWidthChange,value:isNaN(s)?"":s,style:{width:"110px"}}))),(0,e.jsx)(n.SettingSection,{role:"group","aria-label":this.formatMessage("animation"),title:this.formatMessage("animation")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(r.AnimationSettingComponent,{contentId:o.id,oneByOneSetting:l,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!1,supportOneByOne:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),(0,e.jsx)(c,{formatMessage:this.formatMessage,emptyLayout:m,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"body",pageJson:this.props.pageJson,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),(0,e.jsx)(c,{formatMessage:this.formatMessage,emptyLayout:m,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"header",pageJson:this.props.pageJson,header:this.props.header,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),(0,e.jsx)(c,{formatMessage:this.formatMessage,emptyLayout:m,dispatch:this.props.dispatch,pageJson:this.props.pageJson,pageId:this.props.pageId,pagePart:"footer",footer:this.props.footer,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),this.layoutSetting())}}const w=e.ReactRedux.connect(((e,t)=>{var i,s,o,n,a,r,l,c;return{pageJson:null===(s=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.pages[t.pageId],dialogs:null===(n=null===(o=e.appStateInBuilder)||void 0===o?void 0:o.appConfig)||void 0===n?void 0:n.dialogs,header:null===(r=null===(a=e.appStateInBuilder)||void 0===a?void 0:a.appConfig)||void 0===r?void 0:r.header,footer:null===(c=null===(l=e.appStateInBuilder)||void 0===l?void 0:l.appConfig)||void 0===c?void 0:c.footer}}))(x);var b=f(840),y=f.n(b),I=f(7322),S=f.n(I),j=f(5537),C=f.n(j),A=f(9694),M=f.n(A),T=f(3210),N=f.n(T);const k=f(6450),D=f(6717),P=f(5241),L="480px",R="432px",O="var(--light)";class B extends e.React.PureComponent{constructor(s){var o,a;super(s),this.getDefaultText=(e=this.props.dialogJson.confirmBeforeClose)=>{let t="";return this.props.dialogJson.interactionType&&(t=this.formatMessage(e?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText")),t},this.formatMessage=e=>this.props.formatMessage(e),this.getFormatedValue=(e,t)=>t.toFixed(e===i.DistanceUnits.PIXEL?0:1),this.onTextChanged=e=>{this.setState({text:e.target.value})},this.onButtonTextChanged=e=>{this.setState({buttonText:e.target.value})},this.onTextBLur=e=>{const t=this.defaultText;this.textBlur("text",e,t)},this.onButtonTextBLur=e=>{const t=this.formatMessage("ok");this.textBlur("buttonText",e,t)},this.textBlur=(e,t,i)=>{if(i===(t=t.trim())&&(t=""),this.interactionStyles[e]!==t&&this.updateInteractionStyles(e,t),""===t){const t={};t[e]=i,this.setState(t)}},this.updateDialogMask=e=>{this.editDialogProperty("overlayColor",e)},this.getDialogBackgroud=()=>{var e;const{dialogJson:t}=this.props;return(null===(e=t.dialogBackground)||void 0===e?void 0:e.color)===O?t.dialogBackground.set("color",""):t.dialogBackground},this.updateDialogBackgroud=e=>{""===e.color&&(e.color=O),this.editDialogProperty("dialogBackground",e)},this.updateBorder=e=>{this.editDialogProperty("border",e)},this.updateBorderRadius=e=>{this.editDialogProperty("borderRadius",e)},this.updateShadow=e=>{this.editDialogProperty("boxShadow",e)},this.onEffectSettingChange=(i,s)=>{const{dialogJson:o}=this.props,n=i===e.AnimationPlayMode.OneByOne?"oneByOneEffect":"effect";(0,t.getAppConfigAction)().editDialog(o.set(n,s)).exec(),t.builderAppSync.publishAnimationPreviewToApp({dialogId:o.id,playMode:i,id:Symbol("preview dialog animation")})},this.previewAnimation=e=>{const{dialogJson:i}=this.props;(i.effect||i.oneByOneEffect)&&t.builderAppSync.publishAnimationPreviewToApp({dialogId:i.id,playMode:e,id:Symbol("preview dialog animation")})},this.getBrowserIcons=t=>{const s=!this.props.dialogJson.layout[e.BrowserSizeMode.Medium],o=!this.props.dialogJson.layout[e.BrowserSizeMode.Small],n=this.props.browserSizeMode===e.BrowserSizeMode.Large||!this.props.dialogJson.layout[this.props.browserSizeMode],a=this.props.browserSizeMode===e.BrowserSizeMode.Large&&s||this.props.browserSizeMode===e.BrowserSizeMode.Medium||this.props.browserSizeMode===e.BrowserSizeMode.Small&&s&&o,r=this.props.browserSizeMode===e.BrowserSizeMode.Large&&o||this.props.browserSizeMode===e.BrowserSizeMode.Medium&&s&&o||this.props.browserSizeMode===e.BrowserSizeMode.Small,l=this.props.theme.colors.palette.dark[200],c=this.props.formatMessage("applyToLargeScreen"),p=this.props.formatMessage("applyToMediumScreen"),d=this.props.formatMessage("applyToSmallScreen");return(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center"},n&&(0,e.jsx)(i.Icon,{size:t,icon:C(),color:l,title:c}),a&&(0,e.jsx)(i.Icon,{size:t,icon:M(),color:l,className:n?"ml-1":"",title:p}),r&&(0,e.jsx)(i.Icon,{size:t,icon:N(),color:l,className:n||a?"ml-1":"",title:d}))},this.getConfirmationDOMs=t=>(0,e.jsx)("div",{className:"confirmation-container mt-3"},(0,e.jsx)(n.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxText")}),(0,e.jsx)("div",{className:"confirmation-item"},(0,e.jsx)(i.TextArea,{className:"w-100",style:{height:"60px"},spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:this.state.text,onChange:this.onTextChanged,onAcceptValue:this.onTextBLur})),(0,e.jsx)(n.SettingRow,{label:this.formatMessage("fontSize")},(0,e.jsx)(r.InputUnit,{style:{width:"80px"},units:[i.DistanceUnits.PIXEL,i.DistanceUnits.REM],value:this.getFontSize("textSize"),onChange:e=>{this.updateCheckboxTextSize("textSize",e.distance+e.unit)}})),t.interactionType!==e.DialogInteractionType.NoButton&&(0,e.jsx)("div",null,(0,e.jsx)(n.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxButtonText")}),(0,e.jsx)(n.SettingRow,{className:"confirmation-item"},(0,e.jsx)(i.TextInput,{type:"text",size:"sm",className:"w-100",spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:this.state.buttonText,onChange:this.onButtonTextChanged,onAcceptValue:this.onButtonTextBLur})),(0,e.jsx)(n.SettingRow,{label:this.formatMessage("fontSize")},(0,e.jsx)(r.InputUnit,{style:{width:"80px"},units:[i.DistanceUnits.PIXEL,i.DistanceUnits.REM],value:this.getFontSize("buttonTextSize"),onChange:e=>{this.updateCheckboxTextSize("buttonTextSize",e.distance+e.unit)}})))),this.defaultText=this.getDefaultText(),this.state={interactionPanel:s.dialogJson.confirmBeforeClose?"confirmation":"prevent",text:(null===(o=this.interactionStyles)||void 0===o?void 0:o.text)||this.defaultText,buttonText:(null===(a=this.interactionStyles)||void 0===a?void 0:a.buttonText)||this.formatMessage("ok")},this.isRTL=(0,e.getAppStore)().getState().appContext.isRTL}componentDidUpdate(e){var t,i,s,o,n,a;const{dialogJson:r}=this.props;r.interactionStyles&&((null===(t=r.interactionStyles)||void 0===t?void 0:t.text)===(null===(i=e.dialogJson.interactionStyles)||void 0===i?void 0:i.text)&&(null===(s=r.interactionStyles)||void 0===s?void 0:s.buttonText)===(null===(o=e.dialogJson.interactionStyles)||void 0===o?void 0:o.buttonText)||(this.defaultText=this.getDefaultText(),this.setState({text:(null===(n=this.interactionStyles)||void 0===n?void 0:n.text)||this.defaultText,buttonText:(null===(a=this.interactionStyles)||void 0===a?void 0:a.buttonText)||this.formatMessage("ok")})),r.confirmBeforeClose!==e.dialogJson.confirmBeforeClose&&this.setState({interactionPanel:r.confirmBeforeClose?"confirmation":"prevent"}))}getDialogBrowserSizeMode(){return this.props.dialogJson.layout[this.props.browserSizeMode]?this.props.browserSizeMode:e.BrowserSizeMode.Large}defaultInteractionStyles(){return{text:"",textSize:"13px",buttonText:"",buttonTextSize:"16px"}}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig||{dialogs:{empty:{}}}}editDialogProperty(e,i){(0,t.getAppConfigAction)().editDialogProperty(this.props.dialogId,e,i).exec()}editDialog(e){(0,t.getAppConfigAction)().editDialog(e).exec()}setDialogMode(t){let s=this.props.dialogJson;if(t===s.mode)return;const o=this.getDialogBrowserSizeMode();let n=s.sizeMode[o];if(t===e.DialogMode.Anchored){let t=L,a=R;if(n.position===e.DialogPosition.Center){const s=e.utils.findViewportSize(this.getAppConfig(),this.props.browserSizeMode);t=n.width.includes(i.DistanceUnits.PIXEL)?n.width:s.width*parseFloat(n.width.split("%")[0])/100+"px",a=n.height.includes(i.DistanceUnits.PIXEL)?n.height:s.height*parseFloat(n.height.split("%")[0])/100+"px"}n=n.set("width",t).set("height",a).set("position",null),s=s.setIn(["sizeMode",o],n).set("overlayColor",null)}else s=s.setIn(["sizeMode",o,"position"],e.DialogPosition.Center).set("overlayColor","var(--dark-900)");s=s.set("mode",t).set("interactionType",null).set("interactionStyles",null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1),this.editDialog(s)}setDialogPosition(t){const i=this.getDialogBrowserSizeMode();let s=this.props.dialogJson.sizeMode[i];s=s.set("position",t),s=t===e.DialogPosition.Left||t===e.DialogPosition.Right?s.set("aspectRatio",!1).set("width","260px"):t===e.DialogPosition.Top||t===e.DialogPosition.Bottom?s.set("aspectRatio",!1).set("height","300px"):s.set("width",L).set("height",R);const o=this.props.dialogJson.setIn(["sizeMode",i],s);this.editDialog(o)}getDialogSize(e){const t=this.props.dialogJson.sizeMode[this.getDialogBrowserSizeMode()][e];if(!t)return null;const s=t.indexOf(i.DistanceUnits.PIXEL)>=0?i.DistanceUnits.PIXEL:i.DistanceUnits.PERCENTAGE;return{distance:t.split(s)[0],unit:s}}setDialogSize(t,s){const o=this.getDialogBrowserSizeMode();let n=this.props.dialogJson;const a=n.sizeMode[o];if((a[t].indexOf(i.DistanceUnits.PIXEL)>=0?i.DistanceUnits.PIXEL:i.DistanceUnits.PERCENTAGE)!==s.unit){const o=e.utils.findViewportSize(this.getAppConfig(),this.props.browserSizeMode),n="height"===t?o.height:o.width;s.unit===i.DistanceUnits.PIXEL?s.distance=n*s.distance/100:s.distance=100*s.distance/n}else if(a.aspectRatio){const e="width"===t?"height":"width",r=a[e].indexOf(i.DistanceUnits.PIXEL)>=0?i.DistanceUnits.PIXEL:i.DistanceUnits.PERCENTAGE,l=s.distance*parseFloat(a[e].split(r)[0])/parseFloat(a[t].split(s.unit)[0]),c=this.getFormatedValue(r,l)+r;n=n.setIn(["sizeMode",o,e],c)}s.distance=this.getFormatedValue(s.unit,s.distance),n=n.setIn(["sizeMode",o,t],s.distance+s.unit),this.editDialog(n)}getFontSize(e){const t=this.interactionStyles[e],s=t.indexOf(i.DistanceUnits.PIXEL)>=0?i.DistanceUnits.PIXEL:i.DistanceUnits.REM;return{distance:t.split(s)[0],unit:s}}setInteraction(t){let i=this.props.dialogJson;i=i.set("interactionType",t?e.DialogInteractionType.NoButton:null).set("interactionStyles",t?this.defaultInteractionStyles():null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1),this.editDialog(i),this.setState({interactionPanel:t?"confirmation":""})}changeInteractionType(e){let t=this.props.dialogJson;e!==t.interactionType&&(t=t.set("interactionType",e),this.editDialog(t))}setConfirmationType(e){this.defaultText=this.getDefaultText(e),""===this.props.dialogJson.interactionStyles.text&&this.setState({text:this.defaultText});let t=this.props.dialogJson;t=t.set("confirmBeforeClose",e).set("alwaysShowConfirmation",!e),this.editDialog(t),this.setState({interactionPanel:e?"confirmation":"prevent"})}updateAspectRatio(e){const t=this.props.dialogJson.setIn(["sizeMode",this.getDialogBrowserSizeMode(),"aspectRatio"],e);this.editDialog(t)}updateInteractionStyles(e,t){this.editDialogProperty("interactionStyles",this.interactionStyles.set(e,t))}updateCheckboxTextSize(e,t){this.interactionStyles[e]!==t&&this.updateInteractionStyles(e,t)}getStyle(){return e.css`
      .mode-radio{
        cursor: pointer;
        &.mode-label-disabled{
          cursor: inherit;
        }
      }
      .mode-label{
        margin-left: 0.5rem;
        cursor: pointer;
        &.mode-label-disabled{
          cursor: inherit;
          color: var(--dark-200);
        }
      }
      .confirmation-container {
        .confirmation-item{
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
        }
      }

      .position-size-setting{
        display: flex;
        justify-content: space-between;

        .position-container{
          position: relative;
          width: 90px;
          height: 90px;
          border: 1px solid var(--light-500);

          .content {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            padding: 6px;
            justify-content: space-between;
          }

          .w-part {
            width: 19px;
            position: relative;
            z-index: 0;
            &.w-center {
              width: 24px;
              justify-content: space-between;
            }
          }
          .h-part {
            width: 100%;
            height: 19px;
            position: relative;
            z-index: 0;
            &.h-center {
              height: 24px;
            }
          }

          .from-left {
            &.line-h{
              &:after {
                left: 6px;
              }
              &.is-selected:after {
                border-left: none;
              }
            }
          }
          .from-top {
            &.line-v{
              &:after {
                position: absolute;
                top: 6px;
              }
              &.is-selected:after {
                border-top: none;
              }
            }
          }

          .from-center {
            border: 2px solid var(--dark-100);
          }

          .from-right {
            &.line-h{
              &:before {
                position: absolute;
                right: 0;
              }
              &:after {

                right: 6px;
              }
              &.is-selected:after {
                border-right: none;
              }
            }
          }

          .from-bottom {
            &.line-v{
              &:before {
                position: absolute;
                bottom: 0;
              }
              &:after {
                position: absolute;
                top: -2px;
              }
              &.is-selected:after {
                border-bottom: none;
              }
            }
          }
          .line-h.is-selected,
          .line-v.is-selected {
            border-color: var(--primary-700);

            &:before, &:after{
              background: var(--primary-100);
              border: 2px solid var(--primary-700);
            }
          }
          .line-h {
            position: absolute;
            width: 100%;
            top: 50%;
            transform: translateY(-50%);
            height: 24px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            z-index: 0;
            cursor: pointer;

            &:before {
              content: '';
              width: 6px;
              height: 100%;
              background: var(--dark-100);
            }
            &.is-selected:before {
              width: 8px;
            }

            &:after {
              position: absolute;
              top: 9px;
              content: '';
              height: 6px;
              width: 15px;
              background: var(--dark-100);
            }
            &.is-selected:after {
              height: 8px;
            }
          }
          .line-v {
            position: absolute;
            height: 100%;
            width: 100%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            z-index: 0;
            cursor: pointer;

            &:before {
              content: '';
              width: 100%;
              height: 6px;
              background: var(--dark-100);
            }
            &.is-selected:before {
              height: 8px;
            }

            &:after {
              content: '';
              width: 6px;
              height: 15px;
              background: var(--dark-100);
            }
            &.is-selected:after {
              width: 8px;
            }
          }
          .line-center {
            height: 100%;
            width: 100%;
            z-index: 0;
            cursor: pointer;
            background: var(--dark-100);
            &.is-selected {
              background: var(--primary-100);
              border-color: var(--primary-700);
            }
          }
        }

        .size-container{
          width: calc(100% - 106px);
          height: 90px;
          display: flex;
          flex-direction: column;
          justify-content: space-between;

          .size-label{
            color: var(--dark-400);
          }

          .size-input{
            margin-left: 6px;
            width: 100%;
            &.size-auto-input{
              color: var(--dark-400);
              background: var(--light-400);
            }
          }
        }
      }


      .size-setting{
        width: 100%;

        .size-container{
          height: 26px;
          display: flex;
          justify-content: space-between;

          .unit-container{
            display: flex;
            width: calc(50% - 18px);

            .size-label{
              color: var(--dark-400);
            }

            .size-input{
              margin-left: 6px;
            }
          }
        }

      }

      .interaction-container{
        .interaction-type-container{
          display: flex;
          justify-content: space-between;
          .jimu-btn{
            padding: 0;
            background-color: var(--light-200);
            border: 2px solid transparent;
            &.active{
              border: 2px solid var(--primary-600);
            }
          }
        }
      }

    `}render(){const{dialogJson:s}=this.props,o=s.isSplash||t.utils.getPageListByDialogId(this.getAppConfig().pages,s.id).length>0;if(!s.id)return null;const l=s.mode===e.DialogMode.Anchored?[i.DistanceUnits.PIXEL]:[i.DistanceUnits.PIXEL,i.DistanceUnits.PERCENTAGE];this.interactionStyles=s.interactionStyles?s.interactionStyles:this.defaultInteractionStyles();const c=s.sizeMode[this.getDialogBrowserSizeMode()];return(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},(0,e.jsx)(n.SettingSection,{title:this.formatMessage("mode")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("fixedModeTip")},(0,e.jsx)("div",{className:"align-items-center d-flex"},(0,e.jsx)(i.Radio,{className:"mode-radio",onChange:()=>this.setDialogMode(e.DialogMode.Fixed),checked:s.mode===e.DialogMode.Fixed}),(0,e.jsx)("label",{className:"mode-label",onClick:()=>this.setDialogMode(e.DialogMode.Fixed)},this.formatMessage("fixedMode")))))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:o?this.formatMessage(s.isSplash?"splashDlgWarning":"pageDlgWarning"):this.formatMessage("anchoredModeTip")},(0,e.jsx)("div",{className:"align-items-center d-flex"},(0,e.jsx)(i.Radio,{className:(0,e.classNames)("mode-radio",o?"mode-radio-disabled":""),onChange:()=>this.setDialogMode(e.DialogMode.Anchored),checked:s.mode===e.DialogMode.Anchored,disabled:o}),(0,e.jsx)("label",{className:(0,e.classNames)("mode-label",o?"mode-label-disabled":""),onClick:()=>!o&&this.setDialogMode(e.DialogMode.Anchored)},this.formatMessage("anchoredMode"))))))),!this.props.lockLayout&&(0,e.jsx)(n.SettingSection,null,(0,e.jsx)("div",{className:"d-flex mb-3"},(0,e.jsx)("h6",{className:"flex-lg-grow-1 mb-0 text-truncate setting-text-level-1"},s.mode===e.DialogMode.Fixed?`${this.formatMessage("position")} & ${this.formatMessage("size")}`:this.formatMessage("size")),this.getBrowserIcons(12)),(0,e.jsx)(n.SettingRow,null,s.mode===e.DialogMode.Fixed?(0,e.jsx)("div",{className:"position-size-setting"},(0,e.jsx)("div",{className:"position-container"},(0,e.jsx)("div",{className:"content d-flex"},(0,e.jsx)("div",{className:"w-part flex-column justify-content-center align-items-center"},(0,e.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("left")},(0,e.jsx)("div",{className:(0,e.classNames)("from-left line-h flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Left}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Left)}})))),(0,e.jsx)("div",{className:"d-flex w-part w-center h-100 flex-column"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("top")},(0,e.jsx)("div",{className:"h-part"},(0,e.jsx)("div",{className:(0,e.classNames)("from-top line-v flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Top}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Top)}}))),(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("center")},(0,e.jsx)("div",{className:"h-part h-center"},(0,e.jsx)("div",{className:(0,e.classNames)("from-center line-center flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Center}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Center)}}))),(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("bottom")},(0,e.jsx)("div",{className:"h-part"},(0,e.jsx)("div",{className:(0,e.classNames)("from-bottom line-v flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Bottom}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Bottom)}})))),(0,e.jsx)("div",{className:"w-part flex-column"},(0,e.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("right")},(0,e.jsx)("div",{className:(0,e.classNames)("from-right line-h flex-grow-1 flex-shrink-1",{"is-selected":c.position===e.DialogPosition.Right}),onClick:()=>{this.setDialogPosition(e.DialogPosition.Right)}})))))),(0,e.jsx)("div",{className:"size-container"},(0,e.jsx)("div",{className:"d-flex"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("width")},(0,e.jsx)("label",{className:"size-label"},"W")),s.mode!==e.DialogMode.Fixed||c.position!==e.DialogPosition.Top&&c.position!==e.DialogPosition.Bottom?(0,e.jsx)(r.InputUnit,{className:"size-input",units:l,value:this.getDialogSize("width"),min:0,max:this.getDialogSize("width").unit===i.DistanceUnits.PERCENTAGE?100:Number.POSITIVE_INFINITY,onChange:e=>this.setDialogSize("width",e)}):(0,e.jsx)("div",{className:"size-input p-1 size-auto-input"},this.formatMessage("auto"))),(0,e.jsx)("div",{className:"d-flex justify-content-center"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:c.position!==e.DialogPosition.Center?"":this.formatMessage("aspectRatio")},(0,e.jsx)(i.Button,{icon:!0,type:"tertiary",disabled:c.position!==e.DialogPosition.Center,onClick:()=>this.updateAspectRatio(!c.aspectRatio)},(0,e.jsx)(i.Icon,{size:12,icon:c.aspectRatio?y():S()})))),(0,e.jsx)("div",{className:"d-flex"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("height")},(0,e.jsx)("label",{className:"size-label"},"H")),s.mode!==e.DialogMode.Fixed||c.position!==e.DialogPosition.Left&&c.position!==e.DialogPosition.Right?(0,e.jsx)(r.InputUnit,{className:"size-input",units:l,value:this.getDialogSize("height"),min:0,onChange:e=>this.setDialogSize("height",e)}):(0,e.jsx)("div",{className:"size-input p-1 size-auto-input"},this.formatMessage("auto"))))):(0,e.jsx)("div",{className:"size-setting"},(0,e.jsx)("div",{className:"size-container"},(0,e.jsx)("div",{className:"unit-container"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("width")},(0,e.jsx)("label",{className:"size-label"},"W")),(0,e.jsx)(r.InputUnit,{className:"size-input",units:l,value:this.getDialogSize("width"),min:0,onChange:e=>this.setDialogSize("width",e)})),(0,e.jsx)("div",null,(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("aspectRatio")},(0,e.jsx)(i.Button,{icon:!0,type:"tertiary",size:"sm",onClick:()=>this.updateAspectRatio(!c.aspectRatio)},(0,e.jsx)(i.Icon,{size:12,icon:c.aspectRatio?y():S()})))),(0,e.jsx)("div",{className:"unit-container"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("height")},(0,e.jsx)("label",{className:"size-label"},"H")),(0,e.jsx)(r.InputUnit,{className:"size-input",units:l,value:this.getDialogSize("height"),min:0,onChange:e=>this.setDialogSize("height",e)})))))),(0,e.jsx)(n.SettingSection,{title:this.formatMessage("closeOptions")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(i.Label,{check:!0,centric:!0},(0,e.jsx)(i.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:s.closeWhenClickOverlay,onChange:()=>this.editDialogProperty("closeWhenClickOverlay",!s.closeWhenClickOverlay)}),this.formatMessage("clickOutside"))),s.mode===e.DialogMode.Fixed&&(0,e.jsx)("div",{className:"mt-3"},(0,e.jsx)(n.SettingRow,{label:this.formatMessage("interaction")},(0,e.jsx)(i.Switch,{checked:!!s.interactionType,onChange:(e,t)=>this.setInteraction(t)})),s.interactionType&&(0,e.jsx)("div",{className:"interaction-container mt-3"},(0,e.jsx)(n.SettingRow,{className:"confirmation-item",label:this.formatMessage("style")}),(0,e.jsx)("div",{className:"interaction-type-container mt-3 mb-3"},(0,e.jsx)(i.Tooltip,{title:this.formatMessage("interactionStyle1"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary",onClick:()=>this.changeInteractionType(e.DialogInteractionType.NoButton),active:s.interactionType===e.DialogInteractionType.NoButton},(0,e.jsx)(i.Icon,{width:65,height:26,icon:k,flip:this.isRTL?"horizontal":null}))),(0,e.jsx)(i.Tooltip,{title:this.formatMessage("interactionStyle2"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary",onClick:()=>this.changeInteractionType(e.DialogInteractionType.ButtonInline),active:s.interactionType===e.DialogInteractionType.ButtonInline},(0,e.jsx)(i.Icon,{width:65,height:26,icon:D,flip:this.isRTL?"horizontal":null}))),(0,e.jsx)(i.Tooltip,{title:this.formatMessage("interactionStyle3"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary",onClick:()=>this.changeInteractionType(e.DialogInteractionType.ButtonBlock),active:s.interactionType===e.DialogInteractionType.ButtonBlock},(0,e.jsx)(i.Icon,{width:65,height:26,icon:P,flip:this.isRTL?"horizontal":null})))),(0,e.jsx)(n.SettingRow,{className:"confirmation-item",label:this.formatMessage("type")}),(0,e.jsx)("div",{role:"radiogroup",className:"mt-2"},(0,e.jsx)(n.CollapsableRadio,{name:"collapsable-confirmation-radio",label:this.formatMessage("confirmation"),wrapLabel:!0,disableActionForUnchecked:!0,checked:s.confirmBeforeClose,isOpen:"confirmation"===this.state.interactionPanel,onRequestOpen:()=>this.setState({interactionPanel:"confirmation"}),onRequestClose:()=>this.setState({interactionPanel:""}),onCheckedChange:()=>this.setConfirmationType(!0)},(0,e.jsx)("div",{className:"pl-1 pr-1 mb-2"},this.getConfirmationDOMs(s),(0,e.jsx)(n.SettingRow,{className:"mt-2 mb-3"},(0,e.jsx)(i.Label,{check:!0,centric:!0},(0,e.jsx)(i.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:s.alwaysShowConfirmation,onChange:()=>this.editDialogProperty("alwaysShowConfirmation",!s.alwaysShowConfirmation)}),this.formatMessage("alwaysShow"))))),(0,e.jsx)(n.CollapsableRadio,{name:"collapsable-confirmation-radio",label:this.formatMessage("preventDisplayAgain"),wrapLabel:!0,disableActionForUnchecked:!0,checked:!s.confirmBeforeClose,isOpen:"prevent"===this.state.interactionPanel,onRequestOpen:()=>this.setState({interactionPanel:"prevent"}),onRequestClose:()=>this.setState({interactionPanel:""}),onCheckedChange:()=>this.setConfirmationType(!1)},(0,e.jsx)("div",{className:"pl-1 pr-1 mb-2"},this.getConfirmationDOMs(s))))))),(0,e.jsx)(n.SettingSection,{title:this.formatMessage("animation")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(r.AnimationSettingComponent,{contentId:s.id,effectSetting:s.effect,oneByOneSetting:s.oneByOneEffect,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!0,supportOneByOne:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),s.mode===e.DialogMode.Fixed&&(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,{label:this.formatMessage("maskColor")},(0,e.jsx)(a.ThemeColorPicker,{specificTheme:this.props.appTheme,value:s.overlayColor,onChange:this.updateDialogMask}))),(0,e.jsx)(n.SettingSection,{title:this.formatMessage("background")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(r.BackgroundSetting,{background:this.getDialogBackgroud(),onChange:this.updateDialogBackgroud}))),(0,e.jsx)(n.SettingSection,{title:this.formatMessage("border")},(0,e.jsx)(n.SettingRow,{flow:"wrap"},(0,e.jsx)(r.BorderSetting,{value:s.border,onChange:this.updateBorder})),(0,e.jsx)(n.SettingRow,{label:this.formatMessage("borderRadius"),flow:"wrap"},(0,e.jsx)(r.BorderRadiusSetting,{value:s.borderRadius,onChange:this.updateBorderRadius}))),(0,e.jsx)(n.SettingSection,{title:this.formatMessage("boxShadow")},(0,e.jsx)(n.SettingRow,{flow:"wrap"},(0,e.jsx)(r.BoxShadowSetting,{value:s.boxShadow,onChange:this.updateShadow}))))}}const z=e.ReactRedux.connect(((e,t)=>{var i,s,o;return{lockLayout:null===(o=null===(s=null===(i=null==e?void 0:e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.forBuilderAttributes)||void 0===o?void 0:o.lockLayout,dialogJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.dialogs[t.dialogId]||{}}}))(B);var E=f(4796),U=f(5339),V=f.n(U);const W=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:V()},o))};var F=f(8371),Z=f.n(F);const H=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:Z()},o))};var $=f(4786),G=f.n($);const _=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:G()},o))},J={value:"",openType:n.OpenTypes.NewWindow,linkType:e.LinkType.WebAddress};class X extends e.React.PureComponent{constructor(i){super(i),this.linkSettingTrigger=e.React.createRef(),this.getCurrentPageName=e=>{const{appConfig:t,pageId:i}=e;return t.pages[i].label||""},this.openBrowseImage=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return;const t=new FileReader;t.readAsDataURL(e[0]),t.onload=e=>{const t=e.target;this.changeIcon(t.result)}},this.setImageUrl=()=>{const{currentImgUrlInput:e}=this.state;""!==e&&(this.setState({isSetImageUrl:!1}),this.changeIcon(e))},this.getPageType=e=>{const{pages:t}=this.props.appConfig;for(const i in t){const s=t[i];if(s.id===e)return s}return{}},this.settingLinkConfirm=e=>{this.setState({isShowLinkSetting:!1}),(e.value||""===e.value)&&this.setState({currentUrl:e.value}),this.changeUrl(e.value,e.openType)},this.changeUrl=(i,s)=>{const o=this.props.appConfig.pages[this.props.pageId],n=(0,e.Immutable)(o).merge({linkUrl:i||"#",openTarget:s});(0,t.getAppConfigAction)().editPage(n).exec(),J.value=i,J.openType=s},this.changeIcon=i=>{const s=this.props.appConfig.pages[this.props.pageId],o=(0,e.Immutable)(s).merge({icon:i});(0,t.getAppConfigAction)().editPage(o).exec()},this.formatMessage=e=>this.props.formatMessage(e),this.state={isSetImageUrl:!1,currentImgUrlInput:"",isShowLinkSetting:!1,currentUrl:this.props.currentUrl||""},this.fileInput=e.React.createRef()}resetLinkParam(){J.value="",J.openType=n.OpenTypes.NewWindow;const e=this.props.appConfig.pages[this.props.pageId];e&&e.linkUrl&&"#"!==e.linkUrl&&(J.value=e.linkUrl),e&&e.openTarget&&(J.openType=e.openTarget)}getStyle(t){return e.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    `}render(){var t;const{isSetImageUrl:s,currentImgUrlInput:o,isShowLinkSetting:a}=this.state;return this.resetLinkParam(),(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},(0,e.jsx)(n.SettingSection,null,s&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},(0,e.jsx)(i.TextInput,{className:"border-0 w-100",value:o,placeholder:`${this.formatMessage("urlIsHere")}...`,onChange:e=>{this.setState({currentImgUrlInput:e.target.value})},onKeyUp:this.setImageUrl}),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},(0,e.jsx)(H,{className:"float-right"})),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:()=>{this.setState({isSetImageUrl:!1})}},(0,e.jsx)(W,{className:"float-right"})))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(i.Button,{className:"w-100 text-dark set-link-btn",onClick:()=>{this.setState({isShowLinkSetting:!a})},ref:this.linkSettingTrigger},(0,e.jsx)(_,{className:"mr-3"}),"Set link"))),a&&(0,e.jsx)(n.LinkSelectorSidePopper,{isOpen:a,isLinkPageSetting:!0,linkParam:(0,e.Immutable)(J),onSettingCancel:()=>{this.setState({isShowLinkSetting:!1})},onSettingConfirm:this.settingLinkConfirm,trigger:null===(t=this.linkSettingTrigger)||void 0===t?void 0:t.current}))}}X.mapExtraStateProps=e=>({pageId:e.appRuntimeInfo.currentPageId});const K=(0,E.withTheme)(X);class Y extends e.React.PureComponent{constructor(i){super(i),this.getCurrentPageName=e=>{const{appConfig:t,pageId:i}=e;return t.pages[i].label||""},this.openBrowseImage=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return;const t=new FileReader;t.readAsDataURL(e[0]),t.onload=e=>{const t=e.target;this.changeIcon(t.result)}},this.setImageUrl=()=>{const{currentImgUrlInput:e}=this.state;""!==e&&(this.setState({isSetImageUrl:!1}),this.changeIcon(e))},this.formatMessage=e=>this.props.formatMessage(e),this.getPageType=e=>{const{pages:t}=this.props.appConfig;for(const i in t){const s=t[i];if(s.id===e)return s}return{}},this.changeIcon=i=>{const s=this.props.appConfig.pages[this.props.pageId],o=(0,e.Immutable)(s).merge({icon:i});(0,t.getAppConfigAction)().editPage(o).exec()},this.state={isSetImageUrl:!1,currentImgUrlInput:""},this.fileInput=e.React.createRef()}getStyle(){return e.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    `}render(){const{isSetImageUrl:t,currentImgUrlInput:s}=this.state;return(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(i.TextInput,{placeholder:this.formatMessage("noSettingOptions"),disabled:!0,style:{border:0,background:"transparent",userSelect:"none"}}),t&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},(0,e.jsx)(i.TextInput,{className:"border-0 w-100",value:s,placeholder:`${this.formatMessage("urlIsHere")}...`,onChange:e=>{this.setState({currentImgUrlInput:e.target.value})},onKeyUp:this.setImageUrl}),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},(0,e.jsx)(H,{className:"float-right"})),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:()=>{this.setState({isSetImageUrl:!1})}},(0,e.jsx)(W,{className:"float-right"}))))))}}Y.mapExtraStateProps=e=>({pageId:e.appRuntimeInfo.currentPageId});var Q=f(9587),q=f(5369),ee=f.n(q);const te=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:ee()},o))};class ie extends e.React.PureComponent{constructor(i){super(i),this.formatMessage=e=>this.props.formatMessage(e),this._enableEditing=e=>{e.stopPropagation(),this.setState({isEditingLabel:!0})},this._handleLabelInputBlur=e=>{const t=e.target.value,{valid:i}=this._checkLabel(t);i?this.setState({isEditingLabel:!1}):this.setState({isEditingLabel:!1,currentLabel:this.props.view.label})},this._handleLabelInputEnter=e=>{if("Enter"===e.key){const e=this.inputRef.value,{valid:t}=this._checkLabel(e);t&&this.setState({isEditingLabel:!1})}},this._onLabelChange=e=>{this.setState({currentLabel:e.target.value})},this._onLabelUpdate=i=>{if(i&&i.trim().length>0){const{view:s}=this.props,o=(0,e.Immutable)(s).set("label",i);(0,t.getAppConfigAction)().editView(o).exec()}else this.setState({currentLabel:this.props.view.label})},this._checkLabel=e=>{if(e.includes(","))return{valid:!1,msg:this.props.formatMessage("noCommaInLabel")};const{view:i}=this.props,s=(0,t.getAppConfigAction)().appConfig;return t.appConfigUtils.isLabelDuplicated(s,"view",i.id,e)?{valid:!1,msg:this.props.formatMessage("duplicatedLabel")}:{valid:!0}},this.toggleDropDown=e=>{null==e||e.stopPropagation(),this.setState({isDropDownOpen:!this.state.isDropDownOpen})},this.state={currentLabel:this.props.view.label,isEditingLabel:!1,isDropDownOpen:!1},this.dropDownItems=[(0,e.Immutable)({label:this.formatMessage("rename"),event:this._enableEditing.bind(this),visible:!0,a11yFocusBack:!1}),(0,e.Immutable)({label:this.formatMessage("duplicate"),event:this._duplicateView.bind(this),visible:!0}),(0,e.Immutable)({label:this.formatMessage("sectionDelete"),event:this._removeView.bind(this),visible:!0})],this.readonlyDropDownItems=[this.dropDownItems[0]],this.dropDownItemsWithoutDelete=[this.dropDownItems[0],this.dropDownItems[1]]}componentDidUpdate(e,t){!t.isEditingLabel&&this.state.isEditingLabel&&this._focusInput(),e.view.label!==this.props.view.label&&this.setState({currentLabel:this.props.view.label})}_removeView(){const{view:e,sectionId:i,selected:s}=this.props,o=(0,t.getAppConfigAction)().appConfig.sections[i].views;if(s){const s=o.indexOf(e.id);let n;n=s>0?o[s-1]:o[1],t.builderAppSync.publishSectionNavInfoToApp(i,{currentViewId:n,useProgress:!1})}(0,t.getAppConfigAction)().removeView(e.id,i).exec()}_duplicateView(){if(!this.props.view)return;const i=(0,t.getAppConfigAction)(),s=i.duplicateView(this.props.view.id,this.props.sectionId,!0);i.exec(),e.lodash.defer((()=>{this.props.onSelect(s.id)}))}_focusInput(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_getStyle(){return e.css`
    padding: 2px 2px 2px 10px;
    cursor: pointer;
    position: relative;
    .drop-down {
      text-align:right;
      .popover{
        .popover-inner {
          box-shadow: 0 0 0;
        }
      }
    }
    .view-item-drag:hover {
      cursor: pointer !important;
    }
    .label-con {
      max-width: 10rem;
    }
    .label-input {
      max-width: 10rem;
    }
    .view-item-drag {
      z-index: 1;
      background-color: transparent;
      box-shadow: none;
    }
    `}render(){const{editable:t}=this.props,{isEditingLabel:s,currentLabel:o}=this.state,n=t?this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete:this.readonlyDropDownItems;return(0,e.jsx)("div",{css:this._getStyle(),className:"d-flex justify-content-between flex-grow-1","data-testid":"viewItem"},(0,e.jsx)("div",{className:"w-100 view-item-drag d-flex justify-content-between"},(0,e.jsx)("div",{className:"d-flex align-items-center"},!s&&(0,e.jsx)("div",{title:o,className:"label-con text-truncate",onDoubleClick:this._enableEditing},o),s&&(0,e.jsx)("div",null,(0,e.jsx)(i.TextInput,{title:o,className:"label-input",type:"text",value:o,ref:e=>{this.inputRef=e},checkValidityOnChange:this._checkLabel,checkValidityOnAccept:this._checkLabel,onChange:this._onLabelChange,onAcceptValue:this._onLabelUpdate,onBlur:this._handleLabelInputBlur,onKeyUp:this._handleLabelInputEnter}))),(0,e.jsx)("div",{className:"drop-down d-flex toc-item-icon"},(0,e.jsx)("div",{title:this.formatMessage("titleOption")},(0,e.jsx)(i.Dropdown,{direction:"down",size:"sm",useKeyUpEvent:!0,toggle:this.toggleDropDown,isOpen:this.state.isDropDownOpen},(0,e.jsx)(i.DropdownButton,{arrow:!1,icon:!0,onClick:this.toggleDropDown,type:"tertiary"},(0,e.jsx)(te,{size:"s"})),(0,e.jsx)(i.DropdownMenu,null,n.map(((t,s)=>(0,e.jsx)(i.DropdownItem,{key:s,onClick:t.event,a11yFocusBack:t.a11yFocusBack},t.label)))))))))}}class se extends e.React.PureComponent{constructor(){super(...arguments),this.getEchoBackground=()=>{var e;const{view:t,appTheme:s}=this.props,o=t.backgroundPosition?t.backgroundPosition.toUpperCase():"";let n,a;return n=null==t.backgroundColor&&s?null===(e=null==s?void 0:s.body)||void 0===e?void 0:e.bg:""===t.backgroundColor?"rgba(0,0,0,0)":t.backgroundColor?t.backgroundColor:"",t.backgroundIMage&&(a="object"==typeof t.backgroundIMage?t.backgroundIMage:{}),{fillType:o?i.FillType[o]:i.FillType.FIT,color:n,image:a}},this.onBackgroundStyleChange=i=>{this.setState({config:i});const s=i.image?i.image:{},o=(0,e.Immutable)({id:this.props.view.id,label:this.props.view.label,layout:this.props.view.layout,backgroundPosition:i.fillType,backgroundColor:i.color?i.color:null,backgroundIMage:s});(0,t.getAppConfigAction)().editView(o).exec()},this.onLazyLoadChange=i=>{const{view:s}=this.props;(0,t.getAppConfigAction)().editView((0,e.Immutable)(s).set("lazyLoad",i.target.checked)).exec()}}render(){var t;const{view:s}=this.props;return s?(0,e.jsx)("div",{role:"group","aria-label":s.label},(0,e.jsx)(n.SettingSection,{title:this.props.formatMessage("background")},(0,e.jsx)(n.SettingRow,{role:"group","aria-label":this.props.formatMessage("background"),className:"background-setting-con",flow:"wrap"},(0,e.jsx)(r.BackgroundSetting,{background:this.getEchoBackground(),onChange:e=>this.onBackgroundStyleChange(e)}))),(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex align-items-center w-100"},(0,e.jsx)("label",null,(0,e.jsx)(i.Checkbox,{checked:null!==(t=s.lazyLoad)&&void 0!==t&&t,onChange:this.onLazyLoadChange}),(0,e.jsx)("span",{className:"ml-2"},this.props.formatMessage("lazyLoading"))),(0,e.jsx)(i.Tooltip,{placement:"bottom",showArrow:!0,title:this.props.formatMessage("lazyLoadingTip")},(0,e.jsx)(i.Button,{className:"ml-auto",size:"sm",type:"tertiary",icon:!0},(0,e.jsx)(u,{size:"s"}))))))):null}}var oe=f(1528),ne=f.n(oe);const ae=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:ne()},o))};var re=f(3166),le=f.n(re);const ce=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:le()},o))};var pe=f(7319),de=f.n(pe);const ge=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:de()},o))};var he=f(4201),ue=f.n(he);const me=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:ue()},o))};class fe extends e.React.PureComponent{constructor(){super(...arguments),this.snapLeft=()=>{this.props.onDirectionChange("l")},this.snapRight=()=>{this.props.onDirectionChange("r")},this.snapTop=()=>{this.props.onDirectionChange("t")},this.snapBottom=()=>{this.props.onDirectionChange("b")}}render(){const{direction:t,formatMessage:s}=this.props;return(0,e.jsx)(i.ButtonGroup,{size:"sm"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:d.utils.isRTL()?s("right"):s("left")},(0,e.jsx)(i.Button,{icon:!0,active:"l"===t,"aria-pressed":"l"===t,onClick:this.snapLeft},(0,e.jsx)(ae,{size:"s",autoFlip:!0}))),(0,e.jsx)(i.Tooltip,{placement:"bottom",title:s("top")},(0,e.jsx)(i.Button,{icon:!0,active:"t"===t,"aria-pressed":"t"===t,onClick:this.snapTop},(0,e.jsx)(ce,{size:"s"}))),(0,e.jsx)(i.Tooltip,{placement:"bottom",title:d.utils.isRTL()?s("left"):s("right")},(0,e.jsx)(i.Button,{icon:!0,active:"r"===t,"aria-pressed":"r"===t,onClick:this.snapRight},(0,e.jsx)(ge,{size:"s",autoFlip:!0}))),(0,e.jsx)(i.Tooltip,{placement:"bottom",title:s("bottom")},(0,e.jsx)(i.Button,{icon:!0,active:"b"===t,"aria-pressed":"b"===t,onClick:this.snapBottom},(0,e.jsx)(me,{size:"s"}))))}}var ve=f(4750),xe=f.n(ve);const we=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:xe()},o))},be=[i.DistanceUnits.PIXEL];class ye extends e.React.PureComponent{constructor(i){super(i),this._addView=()=>{const{section:i,formatMessage:s}=this.props,o=(0,t.getAppConfigAction)().appConfig,n=(0,e.Immutable)({}).merge({id:e.appConfigUtils.getUniqueId(o,"view"),label:e.appConfigUtils.getUniqueLabel(o,"view",s("view"))});(0,t.getAppConfigAction)().addView(n,i.id).exec(),e.lodash.defer((()=>{this._selectView(n.id)}))},this._duplicateView=()=>{const{activeViewId:i,sectionId:s}=this.props,o=(0,t.getAppConfigAction)(),n=o.duplicateView(i,s,!0);o.exec(),e.lodash.defer((()=>{this._selectView(n.id)}))},this._showViewList=()=>{this.setState({isShowViewList:!0})},this._hideViewList=()=>{this.setState({isShowViewList:!1})},this._selectView=(e,i=!1)=>{const{section:s,activeViewId:o}=this.props;o!==e&&t.builderAppSync.publishSectionNavInfoToApp(s.id,{previousViewId:this.props.activeViewId,currentViewId:e,useProgress:!1}),i&&this.setState({showViewSetting:!0})},this.getStyle=()=>e.css`
      .toc-dropzone {
        margin-top: 0.5rem;
      }
      .toc-dropzone .jimu-widget-setting--row.row{
        margin-top: 0;
      }
      .jimu-widget-setting--row-label{
        color:${this.props.theme.colors.palette.dark[600]};
      }
    `,this.hideViewSetting=()=>{this.setState({showViewSetting:!1})},this.onAutoPlayChanged=i=>{const{section:s}=this.props,o=(0,e.Immutable)(s).set("autoPlay",i.target.checked);(0,t.getAppConfigAction)().editSection(o).exec()},this.onLoopChanged=i=>{const{section:s}=this.props,o=(0,e.Immutable)(s).set("loop",i.target.checked);(0,t.getAppConfigAction)().editSection(o).exec()},this.onIntervalChanged=i=>{const s=+i;if(s>=1){const{section:i}=this.props,o=(0,e.Immutable)(i).set("interval",s);(0,t.getAppConfigAction)().editSection(o).exec()}},this.updateNav=(i,s,o)=>{const{section:n}=this.props,a=(0,e.Immutable)(n).setIn([i,s],o);(0,t.getAppConfigAction)().editSection(a).exec()},this.viewListRef=e.React.createRef(),this.state={showViewSetting:!1,isShowViewList:!0}}render(){var s,o,a,l,c,p,g,h,u,m,f,v,x,w,b,y,I,S,j;const{section:C,views:A,theme:M,dispatch:T,activeViewId:N,editable:k,formatMessage:D}=this.props,{showViewSetting:P}=this.state;if(!C)return null;const L=e.css`
      cursor:pointer;
      margin-top: ${e.polished.rem(-8)};

      .toggle-view {
        transform: ${this.state.isShowViewList?null:"rotate(180deg)"};
      }
    `,R=A.find((e=>e.id===N)),O=null!==(o=null===(s=C.dotsNav)||void 0===s?void 0:s.position)&&void 0!==o?o:"b";return(0,e.jsx)("div",{className:"flexbox-layout-setting h-100",css:this.getStyle()},(0,e.jsx)("div",{className:"h-100 w-100"},(0,e.jsx)(n.SettingCollapse,{css:e.css`border-bottom: 1px solid var(--light-800)`,label:D("views"),className:"p-3",isOpen:this.state.isShowViewList,onRequestOpen:this._showViewList,onRequestClose:this._hideViewList},(0,e.jsx)(n.SettingRow,{className:"mt-3"},(0,e.jsx)(i.Button,{css:L,className:"w-100",type:"primary",onClick:this._addView,title:D("newView")},(0,e.jsx)(we,{className:"mr-0"}),(0,e.jsx)("span",{className:"ml-2"},D("newView")))),(0,e.jsx)("div",{ref:this.viewListRef,className:"toc-dropzone"},(0,e.jsx)(Q.List,{size:"sm",className:"selected-fields-list",itemsJson:Array.from(A).map(((e,t)=>({itemStateDetailContent:e,itemKey:`${t}`}))),dndEnabled:!0,onUpdateItem:(i,s)=>{const{itemJsons:o}=s.props,[,n]=o,a=n.map((e=>e.itemStateDetailContent)),r=(0,e.Immutable)(C).set("views",a.map((e=>e.id)));(0,t.getAppConfigAction)().editSection(r).exec(),this._selectView(N)},isItemFocused:(e,t)=>{const{itemJsons:[i]}=t.props;return N===i.itemStateDetailContent.id},onClickItemBody:(e,t)=>{const{itemJsons:i}=t.props,s=i[0].itemStateDetailContent;this._selectView(s.id,!0)},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:Q.TreeItemActionType.RenderOverrideItem,children:[{name:Q.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:Q.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:Q.TreeItemActionType.RenderOverrideItemBody,children:[{name:Q.TreeItemActionType.RenderOverrideItemDragHandle},{name:Q.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(t,i)=>{const{itemJsons:s}=i.props,o=s[0],n=o.itemStateDetailContent,a=+o.itemKey;return(0,e.jsx)(ie,{index:a,canRemove:A.length>1,formatMessage:D,isLastItem:a===A.length-1,dispatch:T,sectionId:C.id,theme:M,view:n,isFirstItem:0===a,onSelect:e=>this._selectView(e,!0),selected:N===n.id,editable:k})}}))),(0,e.jsx)(n.SettingSection,{role:"group","aria-label":D("tools"),title:D("tools")},(0,e.jsx)(n.SettingRow,{label:D("arrows")},(0,e.jsx)(i.Switch,{"aria-label":D("arrows"),checked:null===(a=C.arrowsNav)||void 0===a?void 0:a.visible,onChange:()=>{var e,t;return this.updateNav("arrowsNav","visible",!(null!==(t=null===(e=C.arrowsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(l=C.arrowsNav)||void 0===l?void 0:l.visible)&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(n.SettingRow,{label:D("direction")},(0,e.jsx)(n.DirectionSelector,{size:"sm",vertical:"v"===C.arrowsNav.direction,onChange:e=>this.updateNav("arrowsNav","direction",e?"v":"h")})),(0,e.jsx)(n.SettingRow,{label:D("size"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:5,max:100,step:1,value:null!==(c=C.arrowsNav.size)&&void 0!==c?c:12,css:e.css`width: 50%`,"aria-label":D("size"),onChange:e=>this.updateNav("arrowsNav","size",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:5,max:100,units:be,value:`${null!==(p=C.arrowsNav.size)&&void 0!==p?p:12}px`,onChange:e=>this.updateNav("arrowsNav","size",e.distance),css:e.css`width: 40%; margin-left: auto;`})),(0,e.jsx)(n.SettingRow,{label:D("offset"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:-100,max:100,step:1,value:null!==(g=C.arrowsNav.offset)&&void 0!==g?g:0,css:e.css`width: 50%`,"aria-label":D("offset"),onChange:e=>this.updateNav("arrowsNav","offset",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:-100,max:100,units:be,value:`${null!==(h=C.arrowsNav.offset)&&void 0!==h?h:0}px`,onChange:e=>this.updateNav("arrowsNav","offset",e.distance),css:e.css`width: 40%; margin-left: auto;`}))),(0,e.jsx)(n.SettingRow,{label:D("dots")},(0,e.jsx)(i.Switch,{checked:null===(u=C.dotsNav)||void 0===u?void 0:u.visible,"aria-label":D("dots"),onChange:()=>{var e,t;return this.updateNav("dotsNav","visible",!(null!==(t=null===(e=C.dotsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(m=C.dotsNav)||void 0===m?void 0:m.visible)&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(n.SettingRow,{label:D("position")},(0,e.jsx)(fe,{direction:O,formatMessage:D,onDirectionChange:e=>this.updateNav("dotsNav","position",e)})),(0,e.jsx)(n.SettingRow,{label:D("size"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:5,max:30,step:1,value:null!==(f=C.dotsNav.size)&&void 0!==f?f:8,css:e.css`width: 50%`,"aria-label":D("size"),onChange:e=>this.updateNav("dotsNav","size",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:5,max:30,units:be,value:`${null!==(v=C.dotsNav.size)&&void 0!==v?v:8}px`,onChange:e=>this.updateNav("dotsNav","size",e.distance),css:e.css`width: 40%; margin-left: auto;`})),(0,e.jsx)(n.SettingRow,{label:D("offset"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:-100,max:100,step:1,value:null!==(x=C.dotsNav.offset)&&void 0!==x?x:50,css:e.css`width: 50%`,"aria-label":D("offset"),onChange:e=>this.updateNav("dotsNav","offset",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:-100,max:100,units:be,value:`${null!==(w=C.dotsNav.offset)&&void 0!==w?w:50}px`,onChange:e=>this.updateNav("dotsNav","offset",e.distance),css:e.css`width: 40%; margin-left: auto;`})),(0,e.jsx)(n.SettingRow,{label:D("spacing"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:0,max:30,step:1,value:null!==(b=C.dotsNav.spacing)&&void 0!==b?b:10,css:e.css`width: 50%`,"aria-label":D("spacing"),onChange:e=>this.updateNav("dotsNav","spacing",e.target.value)}),(0,e.jsx)(r.InputUnit,{min:0,max:30,units:be,value:`${null!==(y=C.dotsNav.spacing)&&void 0!==y?y:10}px`,onChange:e=>this.updateNav("dotsNav","spacing",e.distance),css:e.css`width: 40%; margin-left: auto;`})))),(0,e.jsx)(n.SettingSection,{role:"group"},(0,e.jsx)(n.SettingRow,{label:D("autoPlay")},(0,e.jsx)(i.Switch,{"aria-label":D("autoPlay"),checked:C.autoPlay,onChange:this.onAutoPlayChanged})),C.autoPlay&&(0,e.jsx)(n.SettingRow,{label:D("interval")},(0,e.jsx)(i.NumericInput,{size:"sm",css:e.css`width: 4rem`,value:null!==(I=C.interval)&&void 0!==I?I:d.DEFAULT_AUTOPLAY_INTERVAL,min:1,"aria-label":D("interval"),onChange:this.onIntervalChanged})),C.autoPlay&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(i.Label,{check:!0},(0,e.jsx)(i.Checkbox,{checked:null===(S=C.loop)||void 0===S||S,onChange:this.onLoopChanged,className:"mr-2"}),D("loop")))),(0,e.jsx)(n.SidePopper,{isOpen:P,position:"right",toggle:this.hideViewSetting,trigger:null===(j=this.viewListRef)||void 0===j?void 0:j.current,title:null==R?void 0:R.label},(0,e.jsx)(se,{formatMessage:D,appTheme:this.props.appTheme,view:R}))))}}const Ie=e.ReactRedux.connect(((t,i)=>{var s,o,n,a,r,l,c,p,d,g;const{sectionId:h}=i,{appConfig:u}=t.appStateInBuilder,m=u.sections[h];if(!m)return null;const f=m.views.map((e=>u.views[e])),v=null===(n=null===(o=null===(s=t.appStateInBuilder)||void 0===s?void 0:s.appRuntimeInfo)||void 0===o?void 0:o.sectionNavInfos)||void 0===n?void 0:n[m.id],x=null!==(a=null==v?void 0:v.currentViewId)&&void 0!==a?a:m.views[0],w=null!==(p=null===(c=null===(l=null===(r=t.appStateInBuilder)||void 0===r?void 0:r.appConfig)||void 0===l?void 0:l.forBuilderAttributes)||void 0===c?void 0:c.lockLayout)&&void 0!==p&&p,b=null===(g=null===(d=t.appStateInBuilder)||void 0===d?void 0:d.appRuntimeInfo)||void 0===g?void 0:g.appMode;return{section:m,views:f,activeViewId:x,browserSizeMode:t.appStateInBuilder&&t.appStateInBuilder.browserSizeMode,editable:b===e.AppMode.Design&&!w}}))(ye);var Se=f(6262);class je extends e.React.PureComponent{constructor(i){super(i),this.formatMessage=e=>this.props.formatMessage(e),this._enableEditing=e=>{e.stopPropagation(),this.setState({isEditingLabel:!0})},this._disableEditing=()=>{this._onLabelUpdate(this.inputRef.value),this.setState({isEditingLabel:!1})},this._handleInputEnter=e=>{"Enter"===e.key&&this.setState({isEditingLabel:!1})},this._onLabelUpdate=i=>{const{screen:s}=this.props;if(i&&`${i}`.trim().length>0){const o=(0,e.Immutable)(s).set("label",i);(0,t.getAppConfigAction)().editScreen(o).exec()}else this.inputRef.value=s.label},this._onLabelChange=e=>{this.setState({currentLabel:e.target.value})},this.toggleDropDown=e=>{null==e||e.stopPropagation(),this.setState({isDropDownOpen:!this.state.isDropDownOpen})},this.state={isEditingLabel:!1,currentLabel:this.props.screen.label,isDropDownOpen:!1},this.dropDownItems=[(0,e.Immutable)({label:this.formatMessage("rename"),event:this._enableEditing.bind(this),visible:!0,a11yFocusBack:!1}),(0,e.Immutable)({label:this.formatMessage("duplicate"),event:this._duplicateView.bind(this),visible:!0}),(0,e.Immutable)({label:this.formatMessage("sectionDelete"),event:this._removeScreen.bind(this),visible:!0})],this.readonlyDropDownItems=[this.dropDownItems[0]],this.dropDownItemsWithoutDelete=[this.dropDownItems[0],this.dropDownItems[1]]}componentDidUpdate(e,t){!t.isEditingLabel&&this.state.isEditingLabel&&this._focusInput(),e.screen.label!==this.props.screen.label&&this.setState({currentLabel:this.props.screen.label})}_removeScreen(e){e.stopPropagation();const{index:t}=this.props;this.props.onRemove(t)}_duplicateView(){const{index:e}=this.props;this.props.onDuplicate(e)}_focusInput(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_getStyle(){const{theme:t}=this.props;return e.css`
      padding: 2px 2px 2px 10px;
      cursor: pointer;
      position: relative;
      height: ${e.polished.rem(32)};

      .drop-down {
        text-align: right;
        .popover {
          .popover-inner {
            box-shadow: 0 0 0;
          }
        }
      }
      .drag-icon {
        visibility: hidden;
        color: ${t.colors.palette.dark[600]};
        cursor: move;
      }
      .screen-item-drag:hover {
        cursor: pointer !important;
      }
      .label-con {
        max-width: 10rem;
      }
      .label-input {
        max-width: 10rem;
      }
      .screen-item-drag {
        z-index: 1;
        background-color: transparent;
        box-shadow: none;
      }
    `}render(){const{index:t,browserSizeMode:s,editable:o}=this.props,{label:n}=this.props.screen,{isEditingLabel:a}=this.state,r=o&&s===e.BrowserSizeMode.Large?this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete:this.readonlyDropDownItems;return(0,e.jsx)("div",{css:this._getStyle(),className:"d-flex justify-content-between flex-grow-1","data-testid":"screenItem"},(0,e.jsx)("div",{className:"w-100 screen-item-drag d-flex justify-content-between","data-index":t},(0,e.jsx)("div",{className:"d-flex align-items-center"},!a&&(0,e.jsx)("div",{title:n,className:"label-con text-truncate",onDoubleClick:this._enableEditing},n),a&&(0,e.jsx)("div",null,(0,e.jsx)(i.TextInput,{title:n,className:"label-input",type:"text",value:this.state.currentLabel,ref:e=>{this.inputRef=e},onChange:this._onLabelChange,onAcceptValue:this._disableEditing,onKeyUp:this._handleInputEnter}))),(0,e.jsx)("div",{className:"drop-down d-flex toc-item-icon"},(0,e.jsx)("div",{title:this.formatMessage("titleOption"),css:e.css`
              & > div {
                height: 100%;
              }
            `},(0,e.jsx)(i.Dropdown,{direction:"down",size:"sm",useKeyUpEvent:!0,toggle:this.toggleDropDown,isOpen:this.state.isDropDownOpen},(0,e.jsx)(i.DropdownButton,{arrow:!1,icon:!0,onClick:this.toggleDropDown,type:"tertiary"},(0,e.jsx)(te,{size:"s"})),(0,e.jsx)(i.DropdownMenu,null,r.map(((t,s)=>(0,e.jsx)(i.DropdownItem,{key:s,onClick:t.event,a11yFocusBack:t.a11yFocusBack},t.label)))))))))}}const Ce=e.ReactRedux.connect(((e,t)=>{const{screenId:i}=t,{appConfig:s}=e.appStateInBuilder;return{screen:s.screens[i]}}))(je);var Ae=f(4703),Me=f.n(Ae);const Te=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:Me()},o))},Ne=[i.DistanceUnits.PIXEL,i.DistanceUnits.PERCENTAGE];class ke extends e.React.PureComponent{constructor(s){super(s),this.onMainBackgroundChange=e=>{const{screen:i}=this.props,s=i.setIn(["main","background"],e);(0,t.getAppConfigAction)().editScreen(s).exec()},this.onSideBackgroundChange=e=>{const{screen:i}=this.props,s=i.setIn(["panel","background"],e);(0,t.getAppConfigAction)().editScreen(s).exec()},this.setOverlay=e=>{const{screen:i}=this.props;let s=i.setIn(["panel","overlay"],e);e||(s=s.setIn(["panel","offset"],0),"center"===i.panel.side&&(s=s.setIn(["panel","side"],"left"))),(0,t.getAppConfigAction)().editScreen(s).exec()},this.updateWidth=e=>{var s,o,n;const{screen:a,viewportSize:r}=this.props,{distance:l,unit:c}=e;let p;if(d.utils.isPercentage(null===(s=a.panel)||void 0===s?void 0:s.size)&&c===i.DistanceUnits.PIXEL){const t=d.utils.fromRatio(null===(o=a.panel)||void 0===o?void 0:o.size,r.width);p=a.setIn(["panel","size"],`${Math.round(t)}${e.unit}`)}else if(d.utils.isPercentage(null===(n=a.panel)||void 0===n?void 0:n.size)||c!==i.DistanceUnits.PERCENTAGE)p=a.setIn(["panel","size"],`${e.distance}${e.unit}`);else{const e=d.utils.toRatio(l,r.width);p=a.setIn(["panel","size"],`${e}`)}(0,t.getAppConfigAction)().editScreen(p).exec()},this.updateSide=e=>{const{screen:i}=this.props,s=i.setIn(["panel","side"],e);(0,t.getAppConfigAction)().editScreen(s).exec()},this.updateOffsetX=e=>{const{screen:i}=this.props,s=i.setIn(["panel","offset"],`${e}px`);(0,t.getAppConfigAction)().editScreen(s).exec()},this.updatePadding=e=>{const{screen:i}=this.props,s=i.setIn(["panel","padding"],e);(0,t.getAppConfigAction)().editScreen(s).exec()},this.handleGapChange=e=>{const{screen:i}=this.props,s=(0,t.getAppConfigAction)(),o=i.setIn(["panel","gap"],e.distance);s.editScreen(o),Object.keys(i.panel.layout).map((e=>i.panel.layout[e])).forEach((t=>{s.editLayoutSetting({layoutId:t},{space:e.distance})})),s.exec()},this._getStyle=()=>{const t=this.props.theme?this.props.theme.colors.palette.dark[600]:"#c5c5c5",i=this.props.theme?this.props.theme.colors.palette.dark[600]:"#a8a8a8";return e.css`
      height: calc(100% - 40px);
      overflow: auto;
      & {
        width: 100%;
      }
      .inner-section {
        border-bottom: none;
        padding-bottom: 0;
      }
      .back-btn-con {
        margin: 1rem 0.25rem 0;
        cursor: pointer;
        align-items: center;
      }
      .screen-group-title {
        margin: 1rem 1rem 0;
      }
      .background-set-back {
        color: ${i};
        font-weight: 500;
      }
      .background-setting-con .form-group {
        margin-bottom: ${e.polished.rem(16)};
      }
      .background-setting-header {
        color: ${t};
        font-weight: 500;
      }
    `},this.isRTL=(0,e.getAppStore)().getState().appContext.isRTL}render(){var t,s,o;const{screen:a,formatMessage:l}=this.props;return a?(0,e.jsx)("div",{css:this._getStyle(),className:"pb-2"},(0,e.jsx)("div",{role:"group","aria-label":l("mainStage")},(0,e.jsx)("div",{className:"screen-group-title"},l("mainStage")),(0,e.jsx)(n.SettingSection,{title:l("background")},(0,e.jsx)(n.SettingRow,{role:"group","aria-label":l("background")},(0,e.jsx)(r.BackgroundSetting,{background:a.main.background,onChange:e=>this.onMainBackgroundChange(e)})))),a.panel&&(0,e.jsx)("div",{role:"group","aria-label":l("scrollingPanel")},(0,e.jsx)("div",{className:"screen-group-title"},l("scrollingPanel")),(0,e.jsx)(n.SettingSection,{className:"inner-section",title:l("mode")},(0,e.jsx)("div",null,(0,e.jsx)(i.Label,{className:"mr-3"},(0,e.jsx)(i.Radio,{className:"mr-2",onChange:()=>this.setOverlay(!1),value:"docked",checked:!(null!==(t=a.panel.overlay)&&void 0!==t&&t)}),l("docked"))),(0,e.jsx)("div",null,(0,e.jsx)(i.Label,{className:"mr-3"},(0,e.jsx)(i.Radio,{className:"mr-2",onChange:()=>this.setOverlay(!0),value:"floating",checked:a.panel.overlay}),l("floatingScreen")))),(0,e.jsx)(n.SettingSection,{className:"inner-section",title:l("size")},(0,e.jsx)(n.SettingRow,{label:l("width"),role:"group","aria-label":l("width")},(0,e.jsx)("div",{style:{width:110}},(0,e.jsx)(r.SizeEditor,{label:"W",availableUnits:Ne,mode:d.LayoutItemSizeModes.Custom,disableModeSelect:!0,value:a.panel.size,onChange:this.updateWidth})))),(0,e.jsx)(n.SettingSection,{className:"inner-section",title:l("position")},(0,e.jsx)(n.SettingRow,{label:l("align")},(0,e.jsx)(i.ButtonGroup,{size:"sm","aria-label":l("align")},(0,e.jsx)(i.Tooltip,{title:l(this.isRTL?"right":"left"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,active:"left"===a.panel.side,"aria-pressed":"left"===a.panel.side,onClick:()=>this.updateSide("left")},(0,e.jsx)(ae,{size:"s",autoFlip:!0}))),a.panel.overlay&&(0,e.jsx)(i.Tooltip,{title:l("center"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,active:"center"===a.panel.side,"aria-pressed":"center"===a.panel.side,onClick:()=>this.updateSide("center")},(0,e.jsx)(Te,{size:"s"}))),(0,e.jsx)(i.Tooltip,{title:l(this.isRTL?"left":"right"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,active:"right"===a.panel.side,"aria-pressed":"right"===a.panel.side,onClick:()=>this.updateSide("right")},(0,e.jsx)(ge,{size:"s",autoFlip:!0}))))),(null===(s=a.panel)||void 0===s?void 0:s.overlay)&&(0,e.jsx)(n.SettingRow,{label:l("offsetX")},(0,e.jsx)(i.NumericInput,{value:parseInt(null!==(o=a.panel.offset)&&void 0!==o?o:"0"),onChange:this.updateOffsetX,size:"sm",css:e.css`width: 110px`,"aria-label":l("offsetX")}))),(0,e.jsx)(n.SettingSection,{className:"inner-section",title:l("gap")},(0,e.jsx)(n.SettingRow,{role:"group","aria-label":l("gap")},(0,e.jsx)(r.InputUnit,{className:"w-100",value:{distance:a.panel.gap>=0?a.panel.gap:10,unit:void 0},min:0,onChange:this.handleGapChange}))),(0,e.jsx)(n.SettingSection,{className:"inner-section",title:l("padding")},(0,e.jsx)(n.SettingRow,{role:"group","aria-label":l("padding")},(0,e.jsx)(r.Padding,{value:a.panel.padding,onChange:this.updatePadding}))),(0,e.jsx)(n.SettingSection,{className:"inner-section",title:l("background")},(0,e.jsx)(n.SettingRow,{role:"group","aria-label":l("background")},(0,e.jsx)(r.BackgroundSetting,{background:a.panel.background,onChange:e=>this.onSideBackgroundChange(e)}))))):null}}const De=e.ReactRedux.connect(((t,i)=>{const{screenId:s}=i,{appConfig:o}=t.appStateInBuilder,n=e.utils.findViewportSize(o,t.browserSizeMode||e.BrowserSizeMode.Large);return{screen:o.screens[s],viewportSize:n}}))(ke);class Pe extends e.React.PureComponent{constructor(i){super(i),this.sidePopperTrigger=e.React.createRef(),this.formatMessage=(t,i=!1)=>i?this.props.intl.formatMessage({id:t,defaultMessage:e.defaultMessages[t]}):this.props.formatMessage(t),this._addScreen=e=>{const i=(0,t.getAppConfigAction)(),{screenGroupId:s}=this.props;t.templateUtils.createScreenFromTemplate(i.appConfig,e,e.screenId,{}).then((({appConfig:e,newScreenId:i})=>{e=e.setIn(["screenGroups",s,"screens"],[].concat(e.screenGroups[s].screens,i)),t.builderAppSync.publishAppConfigChangeToApp(e),t.builderAppSync.publishScreenGroupNavInfoToApp(s,e.screenGroups[s].screens.length-1)})),this.closeScreenPopper()},this._duplicateScreen=e=>{const{screenGroupId:i}=this.props,s=(0,t.getAppConfigAction)();s.duplicateScreenByIndex(e,i),s.exec(),t.builderAppSync.publishScreenGroupNavInfoToApp(i,e+1)},this._duplicateActiveScreen=()=>{this._duplicateScreen(this.props.activeScreen)},this._selectScreen=e=>{const{screenGroupId:i,activeScreen:s}=this.props;s!==e&&t.builderAppSync.publishScreenGroupNavInfoToApp(i,e),this.setState({showScreenSetting:!0})},this._removeScreen=e=>{const{screenGroupId:i,screens:s,activeScreen:o}=this.props;(0,t.getAppConfigAction)().removeScreen(s[e],i).exec(),(o>e||o===e&&o===s.length-1)&&t.builderAppSync.publishScreenGroupNavInfoToApp(i,o-1)},this.getStyle=()=>e.css`
      .screen-list {
        padding: 0 1rem;
      }

      .setting-header {
        margin-bottom: 1rem;
      }

      .screen-group-title {
        font-size: 14px;
        color: var(--dark-900);
      }
    `,this.hideScreenSetting=()=>{this.setState({showScreenSetting:!1})},this.toggleScreenPopper=()=>{if(this.props.hasPanel)this.setState({showPopper:!this.state.showPopper});else{const e=(0,Se.getScreenTemplates)().find((e=>"nopanel"===e.name));e&&this._addScreen(e)}},this.closeScreenPopper=()=>{this.setState({showPopper:!1})},this.popperRef=e.React.createRef(),this.state={showPopper:!1,showScreenSetting:!1}}showEditButtons(){const{editable:t,browserSizeMode:i}=this.props,s=i===e.BrowserSizeMode.Large;return t&&s}render(){var s;const{screenGroupId:o,screens:a,theme:r,dispatch:l,activeScreen:c,browserSizeMode:p,editable:d}=this.props,{showScreenSetting:g}=this.state;if(!a)return null;const h=e.css`
      cursor: pointer;
      margin-top: ${e.polished.rem(-8)};
    `;return(0,e.jsx)("div",{className:"screen-group-setting mb-4",css:this.getStyle()},(0,e.jsx)("div",{className:"h-100 screen-list",ref:this.sidePopperTrigger},(0,e.jsx)("div",{className:"d-flex align-items-center setting-header"},(0,e.jsx)("div",{className:"screen-group-title"},this.formatMessage("screen"))),this.showEditButtons()&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{className:"mt-3"},(0,e.jsx)(i.Button,{ref:this.popperRef,"aria-label":this.formatMessage("newScreen"),css:h,type:"primary",onClick:this.toggleScreenPopper,className:"w-100"},(0,e.jsx)(we,{className:"mr-0"}),(0,e.jsx)("span",{className:"ml-2"},this.formatMessage("newScreen")))),this.state.showPopper&&(0,e.jsx)(n.TemplateSelector,{templates:(0,Se.getScreenTemplates)(),referenceElement:this.popperRef.current,onItemSelect:this._addScreen,onClose:this.closeScreenPopper})),(0,e.jsx)(Q.List,{size:"sm",className:"selected-fields-list mt-3",itemsJson:Array.from(a).map(((e,t)=>({itemStateDetailContent:e,itemKey:`${t}`}))),dndEnabled:!0,onUpdateItem:(e,i)=>{const{itemJsons:s}=i.props,[,n]=s,r=n.map((e=>e.itemStateDetailContent)),l=a[c],p=r.indexOf(l);(0,t.getAppConfigAction)().editScreenGroupProperty(o,"screens",r).exec(),this._selectScreen(p)},onClickItemBody:(e,t)=>{const{itemJsons:i}=t.props,s=+i[0].itemKey;this._selectScreen(s)},isItemFocused:(e,t)=>{const{itemJsons:[i]}=t.props;return a[c]===i.itemStateDetailContent},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:Q.TreeItemActionType.RenderOverrideItem,children:[{name:Q.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:Q.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:Q.TreeItemActionType.RenderOverrideItemBody,children:[{name:Q.TreeItemActionType.RenderOverrideItemDragHandle},{name:Q.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(t,i)=>{const{itemJsons:s}=i.props,n=s[0],g=n.itemStateDetailContent,h=+n.itemKey;return(0,e.jsx)(Ce,{key:g,index:h,screenGroupId:o,screenId:g,canRemove:a.length>1,formatMessage:this.formatMessage,dispatch:l,theme:r,editable:d,onRemove:this._removeScreen,onDuplicate:this._duplicateScreen,selected:a[c]===g,browserSizeMode:p})}})),(0,e.jsx)(n.SidePopper,{isOpen:g,position:"right",toggle:this.hideScreenSetting,trigger:null===(s=this.sidePopperTrigger)||void 0===s?void 0:s.current,title:this.props.activeScreenLabel},(0,e.jsx)(De,{formatMessage:this.formatMessage,theme:this.props.theme,screenId:a[c],hideBackgroundWidget:this.hideScreenSetting})))}}const Le=e.ReactRedux.connect(((t,i)=>{var s,o,n,a,r,l,c,p,d,g,h,u;const{screenGroupId:m}=i,{appConfig:f}=t.appStateInBuilder,v=f.screenGroups[m];if(!v)return null;const x=f.screens[v.screens[0]],w=null!==(a=null===(n=null===(o=null===(s=t.appStateInBuilder)||void 0===s?void 0:s.appConfig)||void 0===o?void 0:o.forBuilderAttributes)||void 0===n?void 0:n.lockLayout)&&void 0!==a&&a,b=null===(l=null===(r=t.appStateInBuilder)||void 0===r?void 0:r.appRuntimeInfo)||void 0===l?void 0:l.appMode,y=v.screens,I=null!==(h=null===(g=null===(d=null===(p=null===(c=t.appStateInBuilder)||void 0===c?void 0:c.appRuntimeInfo)||void 0===p?void 0:p.screenGroupNavInfos)||void 0===d?void 0:d[m])||void 0===g?void 0:g.activeIndex)&&void 0!==h?h:0,S=y[I];return{screens:y,activeScreen:I,activeScreenLabel:null===(u=f.screens[S])||void 0===u?void 0:u.label,browserSizeMode:t.appStateInBuilder.browserSizeMode,hasPanel:null!=x.panel,editable:b===e.AppMode.Design&&!w}}))(Pe);class Re extends e.React.PureComponent{constructor(){super(...arguments),this.renderItemSetting=()=>{let i=null;if(this.props.layoutType===e.LayoutType.FixedLayout)i=p.FixedLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.FlowLayout)i=p.FlowLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.ColumnLayout)i=p.ColumnLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.RowLayout)i=p.RowLayoutItemSetting;else{const{containerWidgetId:e,hasLayoutSetting:s}=this.props;s&&(i=t.WidgetSettingManager.getInstance().getItemSettingClass(e))}return i?(0,e.jsx)(e.ErrorBoundary,null,(0,e.jsx)(i,{layoutId:this.props.layoutId,layoutItem:this.props.layoutItem,isLockLayout:this.props.isLockLayout,supportAutoSize:this.props.supportAutoSize,style:this.props.style,onSettingChange:this.props.onSettingChanged,onStyleChange:this.props.onStyleChange,onPosChange:this.props.onPosChanged,formatMessage:this.props.formatMessage})):(0,e.jsx)(n.SettingSection,null,(0,e.jsx)("div",{className:"w-100 justify-content-center d-flex"},this.props.formatMessage("noStyle")))}}componentDidUpdate(){this.loadItemSettingClass()}componentDidMount(){this.loadItemSettingClass()}loadItemSettingClass(){const{containerWidgetId:e,hasLayoutSetting:i}=this.props;e&&i&&!t.WidgetSettingManager.getInstance().getItemSettingClass(e)&&t.WidgetSettingManager.getInstance().loadItemSettingClass(e)}getStyle(){return e.css`
      &.single-setting {
        border-top: 1px solid var(--light-800);
      }
    `}render(){const{isSingle:t=!1}=this.props;return(0,e.jsx)("div",{className:(0,e.classNames)("setting-container",{"single-setting":t}),css:this.getStyle()},this.renderItemSetting())}}const Oe=e.ReactRedux.connect(((t,i)=>{var s,o,n,a,r,l,c,p,g,h,u;const{layoutId:m,layoutItemId:f}=i,v=null===(s=t.appStateInBuilder)||void 0===s?void 0:s.appConfig.layouts,x=null==v?void 0:v[m];let w=null,b=!0;if(!x)return null;const y=d.searchUtils.findLayoutItem(t.appStateInBuilder.appConfig,{layoutId:m,layoutItemId:f}),I=d.searchUtils.getWidgetIdThatUseTheLayoutId(t.appStateInBuilder.appConfig,m);let S=!1;I&&(S=null!==(a=null===(n=null===(o=t.appStateInBuilder.appConfig.widgets[I].manifest)||void 0===o?void 0:o.properties)||void 0===n?void 0:n.hasLayoutItemSettingPage)&&void 0!==a&&a);const j=null==y?void 0:y.type;if(j===e.LayoutItemType.Widget&&y.widgetId){const e=t.appStateInBuilder.appConfig.widgets[y.widgetId];w=e.style,b=null===(c=null===(l=null===(r=e.manifest)||void 0===r?void 0:r.properties)||void 0===l?void 0:l.supportAutoSize)||void 0===c||c}else j===e.LayoutItemType.Section&&(w=t.appStateInBuilder.appConfig.sections[y.sectionId].style,b=!1);return{containerWidgetId:I,hasLayoutSetting:S,style:w,supportAutoSize:b,layoutType:x.type,layoutItem:y,runtimeInfo:t.builder.widgetsSettingRuntimeInfo[I],isLockLayout:null!==(u=null===(h=null===(g=null===(p=t.appStateInBuilder)||void 0===p?void 0:p.appConfig)||void 0===g?void 0:g.forBuilderAttributes)||void 0===h?void 0:h.lockLayout)&&void 0!==u&&u}}))(Re);var Be=f(1407),ze=f.n(Be);const Ee=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:ze()},o))};var Ue;!function(e){e.MessageChoose="MESSAGECHOOSE",e.TargetChoose="TARGETCHOOSE",e.ActionChoose="ACTIONCHOOSE",e.ActionSetting="ACTIONSETTING"}(Ue||(Ue={}));class Ve extends e.React.PureComponent{getStyle(t){var i,s,o;return e.css`
      .setting-header {
        padding: ${e.polished.rem(16)} ${e.polished.rem(16)} ${e.polished.rem(0)} ${e.polished.rem(16)}
      }
      .setting-title {
        font-size: ${e.polished.rem(16)};
        color: ${null===(o=null===(s=null===(i=null==t?void 0:t.colors)||void 0===i?void 0:i.palette)||void 0===s?void 0:s.dark)||void 0===o?void 0:o[600]}
      }
      .back-setting {
        padding: 0;
      }
    `}render(){return(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-between setting-header border-0"},this.props.Routes.length>1&&!this.props.hideBackArrow&&(0,e.jsx)(i.Button,{type:"tertiary",size:"sm",className:"d-flex align-items-center h-100 back-setting",style:{cursor:"pointer"},title:this.props.title,onClick:this.props.onBack},(0,e.jsx)(Ee,{autoFlip:!0,className:"text-dark"})),(0,e.jsx)(i.PanelHeader,{level:1,className:"flex-grow-1",showClose:!0,onClose:this.props.onClose,title:this.props.title})),this.props.children)}}const We=(0,E.withTheme)(Ve);var Fe=f(224),Ze=f.n(Fe);const He=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:Ze()},o))};class $e extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onSelectMessageType=i=>{const s=(0,t.getAppConfigAction)().appConfig,o={id:e.appConfigUtils.getUniqueId(s,"messageConfig"),widgetId:this.props.widgetId,messageType:i,actions:[]};this.props.onSelected((0,e.Immutable)(o))},this.getPublishMessages=()=>{var i,s;const o=(0,t.getAppConfigAction)().appConfig.widgets[this.props.widgetId].manifest.publishMessages,n=[];if(o)for(let t=0;t<o.length;t++){let a=!1;if(this.props.messages)for(let e=0;e<this.props.messages.length;e++){const n=(null===(i=o[t])||void 0===i?void 0:i.messageType)?null===(s=o[t])||void 0===s?void 0:s.messageType:o[t];if(this.props.messages[e].messageType===n){a=!0;break}}if(!a){const i=o[t],s=(null==i?void 0:i.messageType)||i;n.push({messageType:s,messageLabel:(0,e.getMessageTypeLabel)(s,this.props.intl)})}}return n}}getStyle(t){return e.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .choose-message-list {
        .list-item {
          color: ${t.colors.black};
        }
        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${e.polished.rgba(t.colors.white,1)};
          color: ${t.colors.palette.dark[200]} !important;
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${t.colors.palette.light[500]};
            user-select: none;
            font-size: ${e.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${t.colors.palette.light[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${t.colors.white};
          }
        }
      }
    `}render(){const t=this.getPublishMessages();return(0,e.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 choose-message-list"},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"w-100",style:{display:"none"}},(0,e.jsx)(i.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTrigger"),onChange:this.searchItems,value:""}),(0,e.jsx)(He,{className:"p-0 searchIcon"})),(0,e.jsx)("div",{className:"w-100 list"},0===t.length&&(0,e.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noMessage")),t.length>0&&t.map(((t,s)=>(0,e.jsx)(i.Button,{type:"tertiary",className:"text-left list-item mb-2 pt-1 pb-1 pl-2 pr-2 w-100 align-items-center",key:s,onClick:()=>this.onSelectMessageType(t.messageType),title:t.messageLabel},t.messageLabel))))))))}}const Ge=(0,E.withTheme)((0,e.injectIntl)($e));class _e extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.getActions=()=>{const e=[],i=[];let s=null;this.props.target.id,s=this.props.target;const o=t.AppMessageManager.getInstance().getFilteredActions(this.props.message.messageType,this.props.widgetId);for(let t=0;t<o.length;t++)i.includes(o[t].name)||o[t].widgetId!==s.id||(i.push(o[t].name),e.push(o[t]));return e},this.onSelectAction=t=>{let i,s=this.props.message,o=null;this.props.target.id,o=this.props.target,i=o.id?(0,e.getAppStore)().getState().appStateInBuilder?(0,e.getAppStore)().getState().appStateInBuilder.appConfig.widgets[o.id].manifest.version:null:e.version;const n={actionId:t.id+"-"+(new Date).getTime().toString(),widgetId:o.id,messageWidgetId:this.props.widgetId,actionName:t.name,description:null,config:this.checkIsSupportActionSetting(t)?null:void 0,version:i};s=s.set("actions",s.actions.concat(n)),this.props.onSelected(s,n)},this.checkIsSupportActionSetting=e=>!!t.AppMessageManager.getInstance().getActionSettingComponentUri(e,this.props.message.messageType,this.props.message.widgetId)}getStyle(t){return e.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .action-choose-list {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${e.polished.rgba(t.colors.white,1)};
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${t.colors.palette.light[500]};
            user-select: none;
            font-size: ${e.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${t.colors.palette.light[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${t.colors.white};
          }
        }
      }
    `}render(){const t=this.getActions();return(0,e.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 action-choose-list"},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"w-100",style:{display:"none"}},(0,e.jsx)(i.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchAction"),onChange:this.searchItems,value:""}),(0,e.jsx)(He,{className:"p-0 searchIcon"})),(0,e.jsx)("div",{className:"w-100 list"},0===t.length&&(0,e.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noAction")),t.length>0&&t.map(((t,s)=>(0,e.jsx)(i.Button,{className:"d-flex list-item mb-2 pt-1 pb-1 pl-2 pr-2 w-100 align-items-center",key:s,title:t.label,onClick:()=>this.onSelectAction(t)},t.label))))))))}}const Je=(0,E.withTheme)(_e);var Xe=f(3401),Ke=f.n(Xe),Ye=f(3211),Qe=f.n(Ye);const qe=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component has-rtl-svg",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:Ke(),srcRTL:Qe()},o))};class et extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.getTargets=()=>{const e=[],i=[],s=[],o=(0,t.getAppConfigAction)().appConfig,n=t.AppMessageManager.getInstance().getFilteredActions(this.props.message.messageType,this.props.message.widgetId);for(let t=0;t<n.length;t++)if(!s.includes(n[t].widgetId))if(s.push(n[t].widgetId),n[t].widgetId){const i=o.widgets[n[t].widgetId];if(i){if(i.id===this.props.message.widgetId)continue;e.push(i)}}else i.push({uri:n[t].id,label:"Framework"});return{widgetTargets:e,frameWorkTargets:i}},this.onSelectTarget=e=>{this.props.onSelected(e)}}getStyle(t){return e.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .target-choose-list {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${e.polished.rgba(t.colors.white,1)};
        }

        .seperateline-mt {
          margin-top: ${e.polished.rem(5)};
        }

        .seperateline-mb {
          margin-bottom: ${e.polished.rem(1)};
        }

        .seperateline {
          border-top: 1px solid ${t.colors.palette.light[500]};
        }

        .widgets-title {
          font-weight: 600;
          font-size: ${e.polished.rem(14)};
          color: ${t.colors.palette.dark[300]};
        }

        .nodata {
          font-size: ${e.polished.rem(13)};
        }

        button {
          color: ${t.colors.black};
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${t.colors.palette.light[500]};
            user-select: none;
            font-size: ${e.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${t.colors.palette.light[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${t.colors.white};
          }
        }
      }
    `}render(){const t=this.getTargets(),s=t.frameWorkTargets,o=t.widgetTargets;return(0,e.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 target-choose-list"},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"w-100",style:{display:"none"}},(0,e.jsx)(i.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTarget"),onChange:this.searchItems,value:""}),(0,e.jsx)(He,{autoFlip:!0,className:"p-0 searchIcon",size:"m"})),(0,e.jsx)("div",{className:"w-100 list"},0===s.length&&0===o.length&&(0,e.jsx)("div",{className:"d-flex justify-content-center nodata text-break"},this.props.formatMessage("noTargetWidgets")),s.map(((t,s)=>(0,e.jsx)(i.Button,{type:"tertiary",className:"d-flex list-item pt-1 pb-1 pl-2 pr-2 w-100 align-items-center",title:this.props.formatMessage(`action${t.label}`),key:s,onClick:()=>this.onSelectTarget(t)},(0,e.jsx)(qe,{className:"mr-0",size:"m",autoFlip:!0}),(0,e.jsx)("div",{className:"ml-2"},this.props.formatMessage(`action${t.label}`))))),s.length>0&&0===o.length&&(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)("div",{className:"w-100 seperateline-mt seperateline-mb",style:{position:"relative",height:"20px"}},(0,e.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),(0,e.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),(0,e.jsx)("div",{className:"d-flex mt-2 nodata text-break"},this.props.formatMessage("noTargetWidgets"))),o.length>0&&(0,e.jsx)("div",{className:"w-100"},s.length>0&&(0,e.jsx)("div",{className:"w-100 seperateline-mb",style:{position:"relative",height:"20px"}},(0,e.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),(0,e.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),o.map(((t,s)=>{let o;const n=t.icon;return o=n&&n.svg?n:{svg:n},(0,e.jsx)(i.Button,{type:"tertiary",className:"d-flex list-item mt-2 p-1 w-100 align-items-center",title:t.label,key:s,onClick:()=>this.onSelectTarget(t)},(0,e.jsx)(i.Icon,{className:"mr-0",autoFlip:!0,width:16,height:16,icon:o.svg,color:o.properties&&o.properties.color}),(0,e.jsx)("div",{className:"ml-2"},t.label))}))))))))}}const tt=(0,E.withTheme)(et);var it=f(3817),st=f.n(it);const ot=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:st()},o))};var nt=f(1553),at=f.n(nt);const rt=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:at()},o))};var lt=f(4357),ct=f.n(lt);const pt=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:ct()},o))};var dt=f(4020);class gt extends e.React.PureComponent{componentDidMount(){this._initInteractive()}_initInteractive(){if(this.ref){const e=this.ref;let t=null,i=null,s=null;this.dropZoneInteractable=(0,dt.interact)(e).dropzone({accept:`.${this.props.dragItemName}`,overlap:"center",ondropmove:e=>{this.dragElement=e.relatedTarget,this.dropzoneElement=e.target;const t=this.dropzoneElement.getAttribute("data-item-index"),o=this.dragElement.getAttribute("data-item-index"),n=this.dropzoneElement.offsetTop+this.dropzoneElement.clientHeight/2;parseFloat(this.dragElement.getAttribute("move-relative-top"))+this.dragElement.clientHeight/2>n?(i=parseInt(o),s=parseInt(t)):(i=parseInt(o),s=parseInt(t)-1)},ondrop:e=>{this.props.onDragChanged&&this.props.onDragChanged(i,s)}}),this.interactable=(0,dt.interact)(e).draggable({startAxis:"y",lockAxis:"y",inertia:!1,modifiers:[],autoScroll:!0,onstart:e=>{const{clientY0:t,target:i}=e,s=i.getBoundingClientRect(),o=i.clientHeight,n=t-s.top-o/2;i.style.webkitTransform="translate(0px, "+n+"px)",i.style.transform="translate(0px, "+n+"px)",i.setAttribute("start-y",n),i.setAttribute("start-relative-top",i.offsetTop)},onmove:e=>{const{clientY:i,clientY0:s,target:o}=e;let n=i-s+(parseFloat(o.getAttribute("start-y"))||0);t&&cancelAnimationFrame(t),n<0?-1*n>parseFloat(o.getAttribute("start-relative-top"))+.8*o.clientHeight&&(n=-1*(parseFloat(o.getAttribute("start-relative-top"))+.8*o.clientHeight)):n>o.parentElement.clientHeight-parseFloat(o.getAttribute("start-relative-top"))-.2*o.clientHeight&&(n=o.parentElement.clientHeight-parseFloat(o.getAttribute("start-relative-top"))-.2*o.clientHeight),o.setAttribute("move-relative-top",n+parseFloat(o.getAttribute("start-relative-top"))),t=requestAnimationFrame((()=>{o.style.webkitTransform="translate(0px, "+n+"px)",o.style.transform="translate(0px, "+n+"px)",t=null}))},onend:e=>{const{target:i}=e;t&&cancelAnimationFrame(t),i.style.webkitTransform="translate(0px, 0px)",i.style.transform="translate(0px, 0px)"}})}}render(){const{className:t,style:i}=this.props,s=(0,e.classNames)(this.props.dragItemName,"drag-item",t);return e.React.createElement("div",{className:s,style:i,ref:e=>{this.ref=e},"data-item-index":this.props.dragItemIndex,onMouseEnter:()=>{this.props.onMouseEnter(this.props.dragItemIndex)},onMouseLeave:()=>{this.props.onMouseLeave(this.props.dragItemIndex)}},this.props.children)}}function ht(e){let i=null;i=e.widgetId?(0,t.getAppConfigAction)().appConfig.widgets[e.widgetId]:{label:"Framework"};let s=e.actionName;if(i.manifest)if(i.manifest.i18nMessages[`_action_${e.actionName}_label`])s=i.manifest.i18nMessages[`_action_${e.actionName}_label`];else{const t=i.manifest.messageActions;if(t)for(let i=0;i<t.length;i++)if(t[i].name===e.actionName){s=t[i].label;break}}else if("Framework"===i.label){const i=t.AppMessageManager.getInstance().getAllActions();for(let t=0;t<i.length;t++)if(e.actionId.includes(i[t].id)){s=i[t].label;break}}return s}class ut extends e.React.PureComponent{constructor(i){super(i),this.searchItems=e=>{},this.onEditAction=e=>{e.config&&this.props.onClickEditAction(this.props.message,e)},this.onRemoveAction=e=>{let i=this.props.message;const s=Object.assign([],i.actions),o=[];for(let t=0;t<s.length;t++)s[t].actionName===e.actionName&&o.push(s[t]);for(let o=0;o<s.length;o++)if(s[o].actionName===e.actionName&&s[o].widgetId===e.widgetId){const n=Object.assign([],s);n.splice(o,1),i=i.set("actions",n);const a=t.AppMessageManager.getInstance().getAction(e.widgetId,e.actionName);a&&a.onRemoveListen(i.messageType,i.widgetId);break}this.props.onMessageChanged(i)},this.onActionOrderChanged=(e,t)=>{if(e===t)return;let i=this.props.message;const s=[];if(e<t){for(let t=0;t<e;t++)s.push(i.actions[t]);for(let o=e+1;o<t+1;o++)s.push(i.actions[o]);s.push(i.actions[e]);for(let e=t+1;e<i.actions.length;e++)s.push(i.actions[e])}else{for(let e=0;e<t+1;e++)s.push(i.actions[e]);s.push(i.actions[e]);for(let o=t+1;o<e;o++)s.push(i.actions[o]);for(let t=e+1;t<i.actions.length;t++)s.push(i.actions[t])}i=i.set("actions",s),this.props.onMessageChanged(i)},this.getActionList=()=>(0,e.jsx)("div",{style:{position:"relative"}},this.props.message.actions.asMutable().map(((i,s)=>{let o=null;return o=i.widgetId?(0,t.getAppConfigAction)().appConfig.widgets[i.widgetId]:{label:"Framework"},(0,e.jsx)(gt,{dragItemIndex:s,dragItemName:this.props.message.messageType,style:{touchAction:"none",userSelect:"none"},key:s,onDragChanged:this.onActionOrderChanged,onMouseEnter:e=>{this.setState({itemSelected:!0,itemSelectedIndex:e})},onMouseLeave:e=>{this.setState({itemSelected:!1,itemSelectedIndex:void 0})}},(0,e.jsx)("div",{className:(0,e.classNames)("mb-2 mt-2 action-item",{"active-border":this.props.action&&this.props.action.actionId&&this.props.action.actionId===i.actionId}),css:this.getStyle()},(0,e.jsx)("div",{className:"d-flex w-100 justify-content-between align-items-center"},"Framework"===o.label&&(0,e.jsx)("div",{className:"widget-name text-truncate",title:this.props.formatMessage(`action${o.label}`)},this.props.formatMessage(`action${o.label}`)),"Framework"!==o.label&&(0,e.jsx)("div",{className:"widget-name text-truncate",title:o.label},o.label),this.state.itemSelected&&this.state.itemSelectedIndex===s&&(0,e.jsx)("div",{className:"d-flex"},(0,e.jsx)("div",{className:"drag-icon-con"},(0,e.jsx)(ot,{size:"s",className:"p-0 deleteIcon"})),(0,e.jsx)("div",{className:"mr-2",onClick:()=>this.onEditAction(i),title:this.props.formatMessage("actionSettings")},(i.config||null===i.config)&&(0,e.jsx)(rt,{size:"s",className:"p-0 deleteIcon"}),void 0===i.config&&null),(0,e.jsx)("div",{onClick:()=>this.onRemoveAction(i),title:this.props.formatMessage("actionDelete")},(0,e.jsx)(pt,{size:"s",className:"p-0 deleteIcon"})))),(0,e.jsx)("div",{className:"text-dark-600 pl-2 mt-2 d-flex align-items-center action-name"},(0,e.jsx)("div",{className:"w-100 text-truncate",title:ht(i)},ht(i)))))}))),this.state={itemSelected:!1,itemSelectedIndex:void 0}}getStyle(){return e.css`
      & {
        position: relative
      }
      .drag-icon-con {
        position: absolute;
        top: ${e.polished.rem(23)};
        left: 0
      }
    `}render(){const t=(0,e.getMessageTypeLabel)(this.props.message.messageType,this.props.intl);return(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)("div",{className:(0,e.classNames)("w-100 message-item message-item-container mb-3",this.props.isActive?"active-border":"")},(0,e.jsx)("div",{className:"w-100 d-flex justify-content-between align-items-start mt-1"},(0,e.jsx)("h2",{className:"message-item-title",title:t},t),(0,e.jsx)(i.Button,{className:"close-message-button",type:"tertiary",size:"sm",onClick:()=>this.props.onMessageRemoved(this.props.message),title:this.props.formatMessage("sectionDelete")},(0,e.jsx)(W,{size:14,className:"p-0 deleteIcon"}))),this.props.message.actions&&this.props.message.actions.length>0&&this.getActionList(),(0,e.jsx)(i.Button,{className:"mt-2 item-add-action text-truncate",onClick:()=>this.props.onClickAddAction(this.props.message),type:"tertiary",title:this.props.formatMessage("addAction")},`+ ${this.props.formatMessage("addAction")}`)))}}const mt=(0,e.injectIntl)(ut);var ft=f(5506);class vt extends e.React.PureComponent{constructor(i){super(i),this.getActionSettingClass=()=>{const e=this.getActionSettingClassUri();t.AppMessageManager.getInstance().loadActionSettingClass(this.props.action,e).then((e=>{this.setState({settingClass:e})}))},this.onSettingChange=e=>{const t=e.actionId,i=e.config;this.state.cacheActionJson.config!==i&&t===this.state.cacheActionJson.actionId&&this.setState({cacheActionJson:this.state.cacheActionJson.set("config",i)},(()=>{this.updateAction(!1)}))},this.updateAction=e=>{let t=this.props.message;const i=Object.assign([],t.actions);let s=null;for(let e=0;e<i.length;e++)if(i[e].actionId===this.state.cacheActionJson.actionId&&i[e].widgetId===this.state.cacheActionJson.widgetId){const t=this.getAllUseDatasourceFormConfig();i[e]=i[e].set("config",this.state.cacheActionJson.config).set("useDataSources",t),s=i[e];break}t=t.set("actions",i),this.props.onUpdateAction(t,s,e)},this.getAllUseDatasourceFormConfig=()=>{const t=this.state.cacheActionJson.config,i=[],s=null==t?void 0:t.actionUseDataSource,o=null==t?void 0:t.messageUseDataSource;if(o&&i.push(o),s){const o=(null==t?void 0:t.sqlExprObj)||null,n=(0,ft.getJimuFieldNamesBySqlExpression)((0,e.Immutable)(o))||[],a=(null==s?void 0:s.fields)||[],r=(0,e.Immutable)(s).set("fields",Array.from(new Set(a.concat(n))));i.push(r)}return i},this.onDisableDoneBtn=e=>{this.setState({isDisableDoneBtn:e})},this.renderActionSetting=()=>{const t=this.state.settingClass;return t?e.React.createElement(e.ErrorBoundary,null,e.React.createElement(t,{actionId:this.state.cacheActionJson.actionId,widgetId:this.props.action.widgetId,messageWidgetId:this.props.widgetId,config:this.state.cacheActionJson.config?this.state.cacheActionJson.config:void 0,messageType:this.props.message.messageType,onSettingChange:this.onSettingChange,onDisableDoneBtn:this.onDisableDoneBtn})):e.React.createElement("div",null,this.props.formatMessage("actionSettingLoading"))},this.getActionSettingClassUri=()=>{const e=t.AppMessageManager.getInstance().getAllActions();let i=null,s=null;for(let t=0;t<e.length;t++)if(this.props.action.actionId.includes(e[t].id)){i=e[t];break}return i&&(s=t.AppMessageManager.getInstance().getActionSettingComponentUri(i,this.props.message.messageType,this.props.action.messageWidgetId)),s},this.state={settingClass:null,cacheActionJson:this.props.action,isDisableDoneBtn:!1}}componentDidMount(){this.getActionSettingClass()}componentDidUpdate(e){this.getActionSettingClass(),this.props.action!==e.action&&this.setState({cacheActionJson:this.props.action})}render(){const t=this.getActionSettingClassUri();return e.React.createElement("div",{className:"setting-container h-100",style:{overflowY:"auto"}},t?this.renderActionSetting():e.React.createElement("div",null,"  No widget"),e.React.createElement("div",{className:"w-100",style:{height:"50px"}}))}}var xt=f(748),wt=f.n(xt);const bt=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:wt()},o))};class yt extends e.React.PureComponent{constructor(i){super(i),this.sidePopperTrigger=e.React.createRef(),this.popperFocusNode=e.React.createRef(),this.resetState=()=>{this.setState({currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]})},this.updateLocalState=(e,i)=>{const s=(0,t.getAppConfigAction)().appConfig;if(e.messageConfigs&&e.messageConfigs!==i.messageConfigs){let t=null,i=null,o=null;if(this.state.currentTriggeredMessage&&this.state.currentTriggeredMessage.messageType){const n=Object.keys(e.messageConfigs);for(let i=0;i<n.length;i++)if(e.messageConfigs[n[i]].messageType===this.state.currentTriggeredMessage.messageType&&e.messageConfigs[n[i]].widgetId===this.state.currentTriggeredMessage.widgetId){t=e.messageConfigs[n[i]];break}if(t&&this.state.currentTriggeredTarget)if(this.state.currentTriggeredTarget.id){const e=this.state.currentTriggeredTarget;if(this.state.panelRoutes&&this.state.panelRoutes.length>0&&this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ue.ActionChoose)i=s.widgets[e.id];else for(let o=0;o<t.actions.length;o++)if(t.actions[o].widgetId===e.id){i=s.widgets[e.id];break}}else{const e=this.state.currentTriggeredTarget;if(this.state.panelRoutes&&this.state.panelRoutes.length>0&&this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ue.ActionChoose)i=e;else for(let s=0;s<t.actions.length;s++)if(!t.actions[s].widgetId){i=e;break}}if(t&&this.state.currentTriggeredAction&&this.state.currentTriggeredAction.actionName)for(let e=0;e<t.actions.length;e++)if(t.actions[e].actionId===this.state.currentTriggeredAction.actionId&&t.actions[e].widgetId===this.state.currentTriggeredAction.widgetId&&t.actions[e].actionName===this.state.currentTriggeredAction.actionName){o=t.actions[e];break}}this.setState({currentTriggeredMessage:t,currentTriggeredTarget:i,currentTriggeredAction:o})}},this.getMessages=()=>{const e=this.props.messageConfigs,t=[],i=Object.keys(e);if(i.length>0)for(let s=0;s<i.length;s++)e[i[s]]&&e[i[s]].widgetId===this.props.widgetId&&t.push(e[i[s]]);return t},this.onShowMessageChooseList=()=>{const e=[{pathType:Ue.MessageChoose,message:null}];this.setState({panelRoutes:e})},this.onMessageRemoved=e=>{e.actions.forEach((i=>{const s=t.AppMessageManager.getInstance().getAction(i.widgetId,i.actionName);s&&s.onRemoveListen(e.messageType,e.widgetId)})),(0,t.getAppConfigAction)().removeMessage(e).exec()},this.onMessageChanged=e=>{this.setState({currentTriggeredMessage:e},(()=>{(0,t.getAppConfigAction)().editMessage(e).exec()}))},this.onShowTargetChooseList=e=>{const t=[{pathType:Ue.TargetChoose,message:e}];this.setState({currentTriggeredMessage:e,currentTriggeredAction:null,panelRoutes:t})},this.onShowActionSettingPage=(e,t)=>{const i=[{pathType:Ue.ActionSetting,message:e}];this.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:i})},this.backForwardPanel=()=>{const e=Object.assign([],this.state.panelRoutes);if(e.splice(e.length-1,1),e[e.length-1].message){const i=e[e.length-1].message;this.setState({panelRoutes:e,currentTriggeredMessage:e[e.length-1].message},(()=>{(0,t.getAppConfigAction)().editMessage(i).exec()}))}else{const i=this.state.panelRoutes[this.state.panelRoutes.length-1].message;this.setState({panelRoutes:e,currentTriggeredMessage:null},(()=>{(0,t.getAppConfigAction)().removeMessage(i).exec()}))}},this.closePanel=()=>{var e,t;(null==this?void 0:this.popperFocusNode)&&(null===(t=null===(e=this.popperFocusNode)||void 0===e?void 0:e.current)||void 0===t||t.focus()),this.setState({panelRoutes:[]})},this.onMessageChooseListSelected=e=>{const i=Object.assign([],this.state.panelRoutes);i.push({pathType:Ue.TargetChoose,message:e}),this.setState({currentTriggeredMessage:e,panelRoutes:i},(()=>{(0,t.getAppConfigAction)().addMessage(e).exec()}))},this.onTargetChooseListSelected=e=>{const t=Object.assign([],this.state.panelRoutes);t.push({pathType:Ue.ActionChoose,message:this.state.currentTriggeredMessage}),this.setState({currentTriggeredTarget:e,panelRoutes:t})},this.onActionChooseListSelected=(i,s)=>{if(null===s.config){const o=Object.assign([],this.state.panelRoutes);o.push({pathType:Ue.ActionSetting,message:i}),this.setState({currentTriggeredMessage:i,currentTriggeredAction:(0,e.Immutable)(s),panelRoutes:o},(()=>{(0,t.getAppConfigAction)().editMessage(i).exec()}))}else this.setState({currentTriggeredMessage:i,currentTriggeredAction:null,panelRoutes:[]},(()=>{(0,t.getAppConfigAction)().editMessage(i).exec()}))},this.onUpdateAction=(e,i,s)=>{s?this.setState({currentTriggeredMessage:e,currentTriggeredAction:i,panelRoutes:[]},(()=>{(0,t.getAppConfigAction)().editMessage(e).exec()})):this.setState({currentTriggeredMessage:e,currentTriggeredAction:i},(()=>{(0,t.getAppConfigAction)().editMessage(e).exec()}))},this.modalStyle=e.css`
      position: absolute;
      top: 0;
      bottom: 0;
      width: 259px;
      height: 100%;
      padding-bottom: 1px;
      border-right: 1px solid ${this.props.theme.colors.white};
      border-bottom: 1px solid ${this.props.theme.colors.white};
    `,this.state={currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]}}componentDidUpdate(e){this.props.widgetId!==e.widgetId?this.resetState():this.updateLocalState(this.props,e)}render(){var t,s,o,a;const{formatMessage:r}=this.props,l=this.getMessages();return(0,e.jsx)("div",{className:"d-flex h-100 flex-column"},(0,e.jsx)("div",{ref:this.sidePopperTrigger},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,{flow:"wrap"},(0,e.jsx)("div",{className:"w-100 justify-content-center d-flex"},(0,e.jsx)(i.Button,{className:"w-100",type:"primary",onClick:this.onShowMessageChooseList,"aria-describedby":"trigger-empty-tip",ref:this.popperFocusNode},(0,e.jsx)("div",{className:"w-100 text-truncate"},r("addTrigger"))))),(0,e.jsx)(n.SettingRow,{flow:"wrap"},l.map(((t,i)=>(0,e.jsx)(mt,{key:i,message:t,onMessageRemoved:this.onMessageRemoved,isActive:t===this.state.currentTriggeredMessage&&this.state.panelRoutes.length>0,onMessageChanged:this.onMessageChanged,onClickAddAction:this.onShowTargetChooseList,onClickEditAction:this.onShowActionSettingPage,formatMessage:r,action:this.state.panelRoutes.length>0&&this.state.currentTriggeredAction})))),this.state.panelRoutes.length>0&&!this.props.pageId&&(0,e.jsx)("div",null,this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ue.MessageChoose&&(0,e.jsx)(n.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(t=this.sidePopperTrigger)||void 0===t?void 0:t.current},(0,e.jsx)("div",{className:"bg-light-300 border-color-gray-400",css:this.modalStyle},(0,e.jsx)(We,{formatMessage:r,Routes:this.state.panelRoutes,title:r("selectTrigger"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(Ge,{widgetId:this.props.widgetId,onSelected:this.onMessageChooseListSelected,messages:l,formatMessage:r})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ue.TargetChoose&&this.state.currentTriggeredMessage&&(0,e.jsx)(n.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(s=this.sidePopperTrigger)||void 0===s?void 0:s.current},(0,e.jsx)("div",{className:"bg-light-300 border-color-gray-400",css:this.modalStyle},(0,e.jsx)(We,{formatMessage:r,Routes:this.state.panelRoutes,title:r("selectTarget"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(tt,{onSelected:this.onTargetChooseListSelected,message:this.state.currentTriggeredMessage,formatMessage:r})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ue.ActionChoose&&this.state.currentTriggeredMessage&&this.state.currentTriggeredTarget&&(0,e.jsx)(n.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(o=this.sidePopperTrigger)||void 0===o?void 0:o.current},(0,e.jsx)("div",{className:"bg-light-300 border-color-gray-400",css:this.modalStyle},(0,e.jsx)(We,{formatMessage:r,Routes:this.state.panelRoutes,title:r("selectAction"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(Je,{widgetId:this.props.widgetId,onSelected:this.onActionChooseListSelected,message:this.state.currentTriggeredMessage,target:this.state.currentTriggeredTarget,formatMessage:r})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===Ue.ActionSetting&&this.state.currentTriggeredMessage&&this.state.currentTriggeredAction&&(0,e.jsx)(n.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(a=this.sidePopperTrigger)||void 0===a?void 0:a.current},(0,e.jsx)("div",{className:"bg-light-300 border-color-gray-400",css:this.modalStyle},(0,e.jsx)(We,{hideBackArrow:!0,formatMessage:r,Routes:this.state.panelRoutes,title:`${r("actionSet")}`,onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(vt,{widgetId:this.props.widgetId,message:this.state.currentTriggeredMessage,action:this.state.currentTriggeredAction,onUpdateAction:this.onUpdateAction,formatMessage:r}))))))),0===l.length&&(0,e.jsx)("div",{className:"flex-grow-1 text-center no-trigger-tip position-relative"},(0,e.jsx)("div",{className:"position-absolute"},(0,e.jsx)(bt,{size:48}),(0,e.jsx)("p",{className:"trigger-tip",id:"trigger-empty-tip"},r("noTriggerTip",{ButtonString:r("addTrigger")})))))}}var It=f(9788),St=f.n(It);const jt=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:St()},o))};function Ct(t){const{enabled:s,isOpen:o,icon:n,label:a,onEnableToggled:r,onOpenToggled:l,formatMessage:c}=t;return(0,e.jsx)("div",{className:"d-flex align-items-center px-1"},(0,e.jsx)(i.Label,{className:"d-flex align-items-center"},(0,e.jsx)(i.Checkbox,{checked:s,onChange:r}),(0,e.jsx)(i.Icon,{className:"ml-2",icon:n}),(0,e.jsx)("span",{className:"ml-2"},a)),(0,e.jsx)(i.Button,{className:"ml-auto p-0",size:"sm",type:"tertiary",icon:!0,onClick:l,disabled:!s,"aria-label":c(o?"hide":"show")},(0,e.jsx)(jt,{size:"s",rotate:o&&s?180:0})))}function At(s){const{widgetId:o,enabled:a,items:r,dataActions:l=(0,e.Immutable)({}),formatMessage:c,onEnableToggled:p}=s,[d,g]=e.React.useState(!0),h=r[0],u=e.React.useCallback((()=>{g(!d)}),[d,g]),m=[];r.forEach((e=>{var t,i,s,o;(null===(o=null===(s=(null!==(i=null===(t=null==l?void 0:l[e.name])||void 0===t?void 0:t.actions)&&void 0!==i?i:{})[e.widgetId])||void 0===s?void 0:s.enabled)||void 0===o||o)&&m.push(e.widgetId)}));const f=e.React.useCallback((t=>e.i18n.getIntl().formatMessage({id:"numSelected"},{number:t.length})),[]),v=e.React.useCallback((()=>r.map((s=>{var o,n,a;const r=null!==(a=(null!==(n=null===(o=null==l?void 0:l[s.name])||void 0===o?void 0:o.actions)&&void 0!==n?n:{})[s.widgetId])&&void 0!==a?a:(0,e.Immutable)({}),c=(0,t.getAppConfigAction)().appConfig.widgets[s.widgetId];return{value:s.widgetId,label:c.label,render:(t,o)=>{var n;return(0,e.jsx)(i.Label,{className:"d-flex w-100 align-items-center mb-0"},(0,e.jsx)(i.Checkbox,{checked:null===(n=r.enabled)||void 0===n||n}),(0,e.jsx)(i.Icon,{icon:s.icon,className:"ml-2",size:16}),(0,e.jsx)("span",{className:"ml-2"},c.label))}}}))),[r,l]),x=e.React.useCallback(((i,s)=>{var n,a,r,c;const p=null===(c=null===(r=(null!==(a=null===(n=null==l?void 0:l[h.name])||void 0===n?void 0:n.actions)&&void 0!==a?a:(0,e.Immutable)({}))[s])||void 0===r?void 0:r.enabled)||void 0===c||c;(0,t.getAppConfigAction)().editWidgetProperty(o,"dataActions",l.setIn([h.name,"actions",s,"enabled"],!p)).exec()}),[l,o,h.name]);return(0,e.jsx)(n.SettingSection,{title:(0,e.jsx)(Ct,{enabled:a,icon:h.icon,label:h.label,isOpen:d,onEnableToggled:p,onOpenToggled:u,formatMessage:c}),className:(0,e.classNames)({"pb-0":!d||!a}),css:e.css`
        border-bottom: ${d&&a?"1px solid var(--light-800)":"none !important"};
      `},(0,e.jsx)(i.Collapse,{isOpen:d&&a,className:"mt-0"},(0,e.jsx)(n.SettingRow,{flow:"wrap",label:c("selectWidgets"),className:"mt-2",css:e.css`
            .jimu-widget-setting--row-label {
              padding-left: 0.25rem;
              padding-right: 0.25rem;
            }
          `},(0,e.jsx)(i.MultiSelect,{fluid:!0,"aria-label":c("selectWidgets"),items:(0,e.Immutable)(v()),onClickItem:x,values:(0,e.Immutable)(m),displayByValues:f,className:"px-1"})),s.children))}var Mt=f(9395),Tt=f.n(Mt);const Nt=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:Tt()},o))};var kt=f(5234),Dt=f.n(kt);const Pt=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:Dt()},o))};class Lt extends e.React.PureComponent{constructor(e){super(e),this.handleEnableDataActionChanged=e=>{const i=(0,t.getAppConfigAction)().appConfig.widgets[this.props.widgetId];(0,t.getAppConfigAction)().editWidget(i.set("enableDataAction",e.target.checked)).exec()},this.state={settingClasses:{}}}componentDidMount(){const e=t.AppDataActionManager.getInstance().loadAllActionSettingClasses(),i=Object.keys(null!=e?e:{});if(i.length>0){const t=i.map((t=>{return i=this,s=void 0,n=function*(){return yield e[t]},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{l(n.next(e))}catch(e){t(e)}}function r(e){try{l(n.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(a,r)}l((n=n.apply(i,s||[])).next())}));var i,s,o,n}));Promise.allSettled(t).then((e=>{const t={};e.forEach(((e,s)=>{"fulfilled"===e.status?t[i[s]]=e.value:console.error(e.reason)})),this.setState({settingClasses:t})})).catch((e=>console.error(e)))}}getAvailableActions(){var i,s;const o={},n=(0,t.getAppConfigAction)(),a=null===(i=n.appConfig.widgets[this.props.widgetId].manifest)||void 0===i?void 0:i.excludeDataActions,r=e.DataActionManager.getInstance(),l=e.appConfigUtils.buildDataActionRelatedWidgetMap(n.appConfig),c=this.props.appMode===e.AppMode.Design,p=this.props.appMode===e.AppMode.Design;return Object.keys(null!==(s=n.appConfig.widgets)&&void 0!==s?s:{}).forEach((t=>{var i,s;if(t===this.props.widgetId)return;const d=n.appConfig.widgets[t];(null===(s=null===(i=d.manifest)||void 0===i?void 0:i.dataActions)||void 0===s?void 0:s.length)>0&&d.manifest.dataActions.forEach((i=>{var s,n;const g=`${null===(s=d.manifest)||void 0===s?void 0:s.name}.${i.name}`,h=e.appConfigUtils.isWidgetFromSameSource(l,this.props.widgetId,t,c,p);if(r.isActionExcluded(g,a)||!h)return;o[i.name]||(o[i.name]=[]);const u=e.urlUtils.isAbsoluteUrl(d.uri)?`${d.uri}dist/${i.icon}`:`${e.moduleLoader.resolveModuleFullPath("widgets/")}../${d.uri}dist/${i.icon}`;o[i.name].push({name:i.name,icon:u,label:null!==(n=d.manifest.i18nMessages[`_action_${i.name}_label`])&&void 0!==n?n:i.label,widgetId:t,settingUri:`${d.uri}dist/${i.settingUri}`})}))})),o}updateActionStatus(i,s){var o;const{widgetId:n}=this.props,a=(0,t.getAppConfigAction)(),r=null!==(o=a.appConfig.widgets[n].dataActions)&&void 0!==o?o:(0,e.Immutable)({});a.editWidgetProperty(n,"dataActions",r.setIn([i,"enabled"],s)).exec()}createActionItemSetting(t,i){const s=this.state.settingClasses[t.settingUri];return s?(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(s,{widgetId:this.props.widgetId,actionName:t.name,config:i,onSettingChange:e=>{this.updateActionItemSetting(t.name,e)}})):null}updateActionItemSetting(i,s){var o;const{widgetId:n}=this.props,a=(0,t.getAppConfigAction)(),r=null!==(o=a.appConfig.widgets[n].dataActions)&&void 0!==o?o:(0,e.Immutable)({});a.editWidgetProperty(n,"dataActions",r.setIn([i,"config"],s)).exec()}createActionItem(t,i,s){var o,n,a;const{dataActions:r}=this.props,l=null===(n=null===(o=null==r?void 0:r[t])||void 0===o?void 0:o.enabled)||void 0===n||n,c=i[0];return(0,e.jsx)(At,{key:s,widgetId:this.props.widgetId,enabled:l,items:i,dataActions:r,formatMessage:this.props.formatMessage,onEnableToggled:()=>this.updateActionStatus(t,!l)},l&&c.settingUri&&this.createActionItemSetting(c,null===(a=null==r?void 0:r[t])||void 0===a?void 0:a.config))}createExportNotes(t=!1){return(0,e.jsx)("div",{className:(0,e.classNames)("d-flex w-100 pr-1 align-items-center",{"mt-3":t,"pl-5":t,"pl-2":!t}),css:e.css`color: var(--dark-500); font-size: 13px;`},(0,e.jsx)(Nt,{color:"var(--dark-50)"}),(0,e.jsx)("span",{className:"ml-2"},this.props.formatMessage("export")),(0,e.jsx)(i.Tooltip,{placement:"bottom",css:e.css`max-width: 300px; margin-left: auto;`,showArrow:!0,title:this.props.formatMessage("exportNotes")},(0,e.jsx)(i.Button,{className:"ml-auto",type:"tertiary",icon:!0},(0,e.jsx)(u,{className:"mr-1",size:"s",color:"var(--dark-50)"}))))}createEnableBtn(t){const{formatMessage:s,enableDataAction:o}=this.props;return(0,e.jsx)("div",{className:"w-100 d-flex justify-content-between align-items-center px-1"},(0,e.jsx)("div",{className:"title d-flex",css:e.css`max-width: 80%; color: var(--dark-800)`},(0,e.jsx)("div",{className:"text-truncate setting-text-level-1",title:s("enableDataAction")},s("enableDataAction")),(0,e.jsx)(i.Tooltip,{placement:"left",css:e.css`max-width: 300px;`,showArrow:!0,title:s("dataActionTooltip")},(0,e.jsx)(i.Button,{className:"ml-2",icon:!0,size:"sm",type:"tertiary"},(0,e.jsx)(u,{size:"s"})))),(0,e.jsx)(i.Switch,{"aria-label":s("enableDataAction"),"aria-describedby":t?"noDataActionDesc":void 0,checked:o,onChange:this.handleEnableDataActionChanged}))}render(){const{enableDataAction:t}=this.props,i=this.getAvailableActions(),s=Object.keys(i).sort();return 0===s.length?(0,e.jsx)(n.SettingSection,{className:"h-100 d-flex flex-column"},this.createEnableBtn(!0),t&&(0,e.jsx)("div",{className:"d-flex flex-column align-items-center flex-grow-1 mt-3"},this.createExportNotes(),(0,e.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center flex-grow-1"},(0,e.jsx)(Pt,{size:42,color:"var(--dark-200)"}),(0,e.jsx)("p",{id:"noDataActionDesc",className:"p-2",css:e.css`color: var(--dark-500); text-align: center;`},this.props.formatMessage("noDataAction"))))):(0,e.jsx)(n.SettingSection,{className:"h-100"},this.createEnableBtn(!1),t&&(0,e.jsx)(e.React.Fragment,null,s.map(((e,t)=>this.createActionItem(e,i[e],t))),this.createExportNotes(!0)))}}const Rt=e.ReactRedux.connect(((e,t)=>{var i,s,o,n,a;const r=null===(s=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.widgets[t.widgetId];return{dataActions:null==r?void 0:r.dataActions,sizeMode:null===(o=e.appStateInBuilder)||void 0===o?void 0:o.browserSizeMode,appMode:null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo.appMode,enableDataAction:null===(a=null==r?void 0:r.enableDataAction)||void 0===a||a}}))(Lt);class Ot extends e.React.PureComponent{getStyle(t){return e.css`
      .jimu-widget-setting--row {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      .message-setting {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
        }

        .listItem {
          cursor: pointer;
          padding: 5px 0px;
        }

        .listItem.active {
          background-color: ${t.colors.palette.primary[100]};
          border: 0;
        }

        .listItem:hover {
          background-color: ${e.polished.rgba(t.colors.palette.primary[100],.4)};
        }

        .active-border {
          border: 1px solid ${t.colors.palette.primary[700]} !important;
        }

        .message-item-container {
          background-color: ${t.colors.palette.light[500]};
          border: 1px solid ${t.colors.palette.light[500]};
        }

        .message-item {

          .widget-name {
            font-size: ${e.polished.rem(14)};
            font-weight: 400;
          }

          .action-name {
            font-size: ${e.polished.rem(13)};
            height: ${e.polished.rem(25)};
          }

          padding: 5px 12px 6px 12px;

          .action-item {
            padding: 5px 10px 10px 10px;
            border: 1px solid ${t.colors.palette.light[400]};
            background-color: ${t.colors.palette.light[400]};
          }

          .drag-item {
            &:hover {

              .action-item {
                border: 1px solid ${t.colors.palette.primary[700]};
              }

              .action-name {
                background-color: ${t.colors.palette.secondary[200]};
              }
            }
          }

          .message-item-title {
            font-size: ${e.polished.rem(14)};
            width: 190px;
            overflow: hidden;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            display: -webkit-box;
          }

          .close-message-button {
            padding: 0;
            svg {
              margin: 0;
            }
          }

          .deleteIcon-disable {
            opacity: .3;
          }

          .deleteIcon {
            cursor: pointer;
            opacity: .8;
          }

          .deleteIcon:hover {
            opacity: 1;
          }

          .item-add-action {
            cursor: pointer;
            color: ${t.colors.palette.primary[700]};
            padding: 0;
            &:hover {
              color: ${t.colors.palette.primary[800]};
            }
          }
        }

        .jimu-widget-setting--section {
          padding-left: 0;
          padding-right: 0;
        }
        .jimu-widget-setting--row {
          padding-left: 1rem;
          padding-right: 1rem;
        }
        .no-trigger-tip {
          &>div {
            top: 50%;
            transform: translateY(-50%);
            color: ${t.colors.palette.dark[200]};
          }
          p {
            color: ${t.colors.palette.dark[500]};
            font-size: ${e.polished.rem(14)};
            margin: ${e.polished.rem(16)} auto 0;
            line-height: ${e.polished.rem(19)};
            width: ${e.polished.rem(228)};
          }
        }
      }
    `}createMessageActionSetting(){const{pageId:t,widgetId:i,theme:s,messageConfigs:o}=this.props;return(0,e.jsx)(yt,{pageId:t,widgetId:i,theme:s,messageConfigs:o,formatMessage:this.props.formatMessage})}createDataActionSetting(){return(0,e.jsx)(Rt,{widgetId:this.props.widgetId,formatMessage:this.props.formatMessage})}render(){const{supportMessageAction:t,canConsumeDataAction:s,formatMessage:o}=this.props;return t&&!s?(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"jimu-widget message-setting px-3"},this.createMessageActionSetting())):!t&&s?(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},this.createDataActionSetting()):(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"jimu-widget message-setting"},(0,e.jsx)(i.Tabs,{type:"pills",fill:!0,className:"p-3 h-100",defaultValue:"message"},(0,e.jsx)(i.Tab,{id:"message",title:o("messageAction")},this.createMessageActionSetting()),(0,e.jsx)(i.Tab,{id:"data",title:o("dataAction")},this.createDataActionSetting()))))}}const Bt=e.ReactRedux.connect(((e,t)=>{var i,s;return{messageConfigs:null===(s=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.messageConfigs}}))((0,E.withTheme)(Ot));var zt=f(663),Et=f(8683),Ut=f.n(Et),Vt=f(760),Wt=f.n(Vt),Ft=f(1397),Zt=f.n(Ft);const Ht=t=>{const{className:s}=t,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return e.React.createElement(i.SVG,Object.assign({className:n,src:Zt()},o))};const{useState:$t,useEffect:Gt}=e.React,_t={svg:Ut()},Jt={svg:Wt()},Xt=Object.assign({},{pageSetting:"Page settings",dialogSetting:"Dialog settings",openWithWindow:"Open with Window",openWithWindowTip:"Only fixed windows are supported (except splash).",folderSetting:"Folder settings",linkSetting:"Link settings",noSelection:"No selection",customWidth:"Fixed width",fitToWindow:"Fit to window",fitToWidthOnly:"Full width",fitToContainer:"Fit to container",keepAspectRatio:"Keep aspect ratio",aspectRatio:"Aspect ratio",fixedHeight:"Fixed height",content:"Content",dynamicSettingStyle:"Style",action:"Action",donotSupportDataAction:"The widget does not support any data actions.",daynamicLayout:"Layout",displayMode:"Display mode",dynamicWidth:"Width",dynamicHeight:"Height",dynamicLoading:"Loading",heightMode:"Height mode",body:"Body",header:"Header",footer:"Footer",urlIsHere:"Type URL here.",sectionDelete:"Delete",noWidget:"No widget",maxWidth:"Max width",docked:"Docked",floatingScreen:"Floating",verticalSpacing:"Vertical spacing",triggerPosition:"Trigger position",upper:"Upper",lower:"Lower",dsDuplicateView:"Duplicate view",dsDuplicateScreen:"Duplicate screen",newView:"New view",noSettingOptions:"No setting options",contentWidth:"Content width",dsCustom:"Custom",dsAuto:"Auto",size:"Size",lockParent:"Kept within the parent container",margin:"Margin",noStyle:"This widget does not support style settings.",addTrigger:"Add a trigger",noTrigger:"The widget does not generate any triggers.",selectTrigger:"Select a trigger",selectTarget:"Select a target",selectAction:"Select an action",actionBack:"Back",actionSet:"Action settings",actionSettings:"Settings",actionDelete:"Delete",addAction:"Add action",targetWidgets:"Widgets",noMessage:"No message",noTargetWidgets:"No widget",messageAction:"Message action",dataAction:"Data action",noAction:"No action",chooseSearchTrigger:"Select or search a trigger",chooseSearchTarget:"Select or search a target",chooseSearchAction:"Select or search an action",actionDone:"Done",actionFramework:"Framework",actionSettingLoading:"Loading...",turnTo:"Switch to:",dsFill:"Fill",keepFixedOnScroll:"Stays at the top of the page when scrolling",titleBackground:"Background",titleOption:"Options",copyPage:"Copy",mode:"Mode",fixedMode:"Fixed",anchoredMode:"Anchored",fixedModeTip:"Display in a fixed position.",anchoredModeTip:"Appears next to the linked widget.",splashDlgWarning:"Splash cannot be set to Anchored.",pageDlgWarning:"Window opened with pages cannot be set to Anchored.",keepLeft:"Keep left",keepRight:"Keep right",keepCenter:"Keep center",keepTop:"Keep top",keepBottom:"Keep bottom",closeOptions:"Close options",clickOutside:"Click outside to close Window",interaction:"Interaction",interactionStyle1:"Checkbox only",interactionStyle2:"Button in the same line",interactionStyle3:"Button in a different line",confirmation:"Confirmation",confirmationRequiredText:"Check to proceed",confirmationButtonTextHolder:"Required",closeIcon:"Close icon",closeIconPosition:"Position",closeIconPositionTL:"Top left",closeIconPositionTR:"Top right",preventDisplayAgain:'"Don\'t show this again" option',checkboxText:"Checkbox text",checkboxButtonText:"Button text",alwaysShow:"Always show this window",arrows:"Arrows",dots:"Dots",interval:"Interval (Second)",loop:"Loop",toggleViewList:"Toggle view list",spacing:"Spacing",scrollToSwitch:"Scroll to switch",dataActions:"Data actions",enableDataAction:"Enable data action",chooseDataAction:"Please choose the following data actions",selectWidgets:"Select widgets",dataActionTooltip:"Show data action button on the widget. The widget will not have any data actions, if no action is configured, or the data type does not support data action.",noDataAction:"To see data action options, please add a widget that provides data action onto the same page.",noTriggerTip:'Click the "{ButtonString}" button to add and configure actions.',exportNotes:"Note: Export is configured in the Data panel.",lazyLoading:"Lazy loading",lazyLoadingTip:"Load content when switched for the first time."},i.defaultMessages,{previousView:"Previous view",nextView:"Next view",originTL:"Top left as origin",originTR:"Top right as origin",originBL:"Bottom left as origin",originBR:"Bottom right as origin",alignLeft:"Align left",alignRight:"Align right",alignTop:"Align top",alignCenter:"Align center",alignHCenter:"Horizontal center",alignVCenter:"Vertical center",alignBottom:"Align bottom",alignStretch:"Align stretch",sendBackward:"Send backward",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",zoomoutFixed:"Zoom out fixed",order:"Order",moveToLeft:"Move to left",moveToRight:"Move to right",moveToTop:"Move to top",moveToBottom:"Move to bottom",addView:"New view",duplicateScreen:"Duplicate screen",deleteScreen:"Delete screen",applyToFirstPanel:"Apply to the first panel",deleteView:"Delete view",duplicateView:"Duplicate view",insertABlock:"Insert block",insertAScreenGroup:"Insert screen group",moveup:"Move up",movedown:"Move down",chooseTemplate:"Choose a {type} template",chooseHeaderTemplate:"Choose a header template",chooseFooterTemplate:"Choose a footer template",dropWidgetToAdd:"Or drag a widget here",snapToLeft:"Snap to left",snapToTop:"Snap to top",snapToBottom:"Snap to bottom",snapToRight:"Snap to right",fullWidth:"Full width",fullHeight:"Full height",fullSize:"Full size",restoreSize:"Restore size",pendingTip:"Move to the pending list",setting:"Settings",dragToMove:"Drag to move",lockLayout:"Lock position and size",unlockLayout:"Unlock position and size",editHeader:"Edit header",editFooter:"Edit footer",transform:"Transform",rotation:"Rotation",angle:"Angle",floating:"Pin",sinking:"Unpin",floatingArea:"Floating area",changeToAuto:"Change to auto",changeToCustom:"Change to custom",positionType:"Position type",sticky:"Sticky",fixed:"Fixed",flow:"Flow",stack:"Stack",fixedAtTop:"Floating at the top when scrolling",actNormal:"Act as normal widget",hideInDesignView:"Hide in design view",showInDesignView:"Show in design view"},e.defaultMessages),Kt=s=>{const[o,n]=$t("#"),{id:a,type:r,theme:l,intl:c,linkTitle:p,ariaLabel:d}=s;return Gt((()=>{((i,s)=>{return o=void 0,n=void 0,r=function*(){var o,n,a,r,l;const c=null===(n=null===(o=(0,e.getAppStore)().getState())||void 0===o?void 0:o.appStateInBuilder)||void 0===n?void 0:n.appConfig;let p;if("page"===s||"dialog"===s)return yield t.helpUtils.getBuildAppsHelpLink(`add-a-${s}`);if("screen"===s)return yield t.helpUtils.getBuildAppsHelpLink("add-screen-groups");if("section"===s)p="section";else if("placeholder"===s)p="placeholder";else if(p=null===(l=null===(r=null===(a=null==c?void 0:c.widgets)||void 0===a?void 0:a[i])||void 0===r?void 0:r.manifest)||void 0===l?void 0:l.name,!p)return yield Promise.resolve(null);return yield t.helpUtils.getWidgetHelpLink(p)},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{l(r.next(e))}catch(e){t(e)}}function s(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(i,s)}l((r=r.apply(o,n||[])).next())}));var o,n,a,r})(a,r).then((e=>{n(e)}))}),[a,r]),(0,e.jsx)(i.Link,{themeStyle:{icon:!0,type:"link"},to:o,target:"_blank",title:p,css:e.css`
        padding: 0 !important;
        .svg-component{
          margin-right: 0;
          color: ${l.colors.palette.dark[400]};
        }
        :hover {
          .svg-component{
            color: ${l.colors.black};
          }
        }
      `,"aria-label":d},(0,e.jsx)(Ht,{autoFlip:!e.i18n.isSameLanguage(null==c?void 0:c.locale,"he")}))},Yt=s=>{var o;const{hideColorSelector:n,headTitle:a,icon:r,customIcon:l,id:c,type:p,needIconFlip:d,theme:g,intl:h,handleIconChange:u,handleTitleChange:m,handleKeydown:f,headTitleInput:v,defaultLabel:x}=s,[w,b]=$t("");let y,I="";const S="string"==typeof l?[{svg:l}]:[l],j=JSON.parse(JSON.stringify(r));if(null==j?void 0:j.svg){const e=null===(o=null==j?void 0:j.properties)||void 0===o?void 0:o.filename;e?(null==e?void 0:e.indexOf(".svg"))>0&&(I=x):j.properties={filename:x},y=j}else y={svg:r,properties:{filename:x}};Gt((()=>{b(a)}),[a]);const C=e=>h.formatMessage({id:e,defaultMessage:Xt[e]}),A=e=>{if("page"===p||"dialog"===p){const i=(0,t.getAppConfigAction)();if(t.appConfigUtils.isLabelDuplicated(i.appConfig,p,c,e))return{valid:!1,msg:C("duplicatedLabel")}}return{valid:!0}};return(0,e.jsx)("div",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)(zt.IconPicker,{previewOptions:{autoFlip:d,color:!0},configurableOption:n?"none":"color",className:"flex-none",icon:y,customLabel:I,customIcons:S,onChange:u,hideRemove:!0,onKeyDown:t=>{if("Tab"===t.key&&t.shiftKey&&(0,e.getAppStore)().getState().appStateInBuilder.appRuntimeInfo.appMode===e.AppMode.Design){t.preventDefault();const i=document.querySelector(`iframe[name="${e.APP_FRAME_NAME_IN_BUILDER}"]`);((null==i?void 0:i.contentDocument)||(null==i?void 0:i.contentWindow.document)).body.focus()}},setButtonUseColor:!1}),(0,e.jsx)("div",{className:"d-flex mx-1",css:e.css`max-width: 170px;`},(0,e.jsx)(i.TextInput,{className:"header-title-input w-100 h5",ref:v,size:"sm",title:w,value:w||"",onChange:e=>b(e.target.value),onAcceptValue:e=>m(c,e,p),checkValidityOnChange:A,checkValidityOnAccept:A,onBlur:e=>(e=>{if(""===e.trim()){const i=(0,t.getAppConfigAction)();"widget"===p?e=i.appConfig.widgets[c].label:"section"===p?e=i.appConfig.sections[c].label:"screen"===p?e=i.appConfig.screenGroups[c].label:"page"===p&&(e=i.appConfig.pages[c].label),b(e)}})(e.target.value),onKeyDown:f,borderless:!0}))),(0,e.jsx)(Kt,{id:c,type:p,theme:g,intl:h,linkTitle:C("help")}))};class Qt extends e.React.PureComponent{constructor(i){super(i),this.spanText=e.React.createRef(),this.headTitleInput=e.React.createRef(),this.getCss=()=>{const{theme:t}=this.props;return e.css`
      height: 100%;
      overflow: hidden;
      overflow-x: hidden;

      .jimu-widget-setting {
        overflow-x: hidden;
      }
      .widget-setting-tab{
        position: absolute;
        background-color: ${t.body.bg};
      }

      .widget-setting, .section-setting {
        height: calc(100% - ${e.polished.rem(2)});
      }

      .jimu-widget-setting--row {
        label {
          user-select: none;
        }
      }
      .jimu-widget-setting--section-header {
        user-select: none;
      }
      .tab-content {
        height: calc(100% - ${e.polished.rem(40)});
        overflow: auto;
        overflow-x: hidden;
      }
      .tab-pane{
        width: 100%;
      }

      .tab-title-item{
        width: 30%;
      }

      .edit-label-input {
        width: 50%;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }

      .title-span-hide {
        &.h5 {
          font-weight: ${t.typography.weights.extraBold};
          font-size: 1rem;
        }
      }

      .header-title-input {
        .input-wrapper {
          height: 100%;
          background-color: transparent;
        }
        &.h5 {
          input {
            font-weight: ${t.typography.weights.bold};
            font-size: ${e.polished.rem(16)};
            color: var(--dark-600);
          }
        }
      }

      .setting-container {
        overflow-y: auto;
        overflow-x: auto;
        height: 100%;
      }

      .single-setting {
        border-top: 1px solid ${t.colors.palette.light[800]};
      }

      .help-btn {
        color: ${t.colors.palette.light[800]};
      }
      .help-btn:hover {
        color: ${t.colors.black};
      }
    `},this.onLayoutItemSettingChanged=(e,i)=>{(0,t.getAppConfigAction)().editLayoutItemSetting(e,i).exec()},this.onLayoutItemStyleChanged=(i,s)=>{const o=(0,t.getAppConfigAction)(),{layoutId:n,layoutItemId:a}=i,r=o.appConfig.layouts[n].content[a];r.type===e.LayoutItemType.Widget?o.editWidgetProperty(r.widgetId,"style",s).exec():r.type===e.LayoutItemType.Section&&o.editSectionProperty(r.sectionId,"style",s).exec()},this.onLayoutPosChanged=(e,i)=>{(0,t.getAppConfigAction)().editLayoutItemBBox(e,i).exec()},this.getPageType=(e,t)=>{for(const i in t){const s=t[i];if(s.id===e)return s}return{}},this.formatMessage=(e,t)=>this.props.intl.formatMessage({id:e,defaultMessage:Xt[e]},t),this.editTitle=(e,i,s)=>{const o=(0,t.getAppConfigAction)();i?"widget"===s||"block"===s?o.editWidgetProperty(e,"label",i).exec():"section"===s?o.editSectionProperty(e,"label",i).exec():"screen"===s?o.editScreenGroupProperty(e,"label",i).exec():"page"===s?o.editPageProperty(e,"label",i).exec():"dialog"===s&&o.editDialogProperty(e,"label",i).exec():"widget"===s?i=o.appConfig.widgets[e].label:"section"===s?i=o.appConfig.sections[e].label:"screen"===s?i=o.appConfig.screenGroups[e].label:"page"===s&&(i=o.appConfig.pages[e].label)},this.handleKeydown=e=>{"Enter"===e.key&&this.headTitleInput.current&&this.headTitleInput.current.blur()},this.handleIconChange=e=>{const i=this.getDisplay(),{selection:s,currentPageId:o,currentDialogId:n}=this.props,a=(0,t.getAppConfigAction)(),r=a.appConfig;if(i.page)a.editPageProperty(o,"icon",e).exec();else if(i.dialog)a.editDialogProperty(n,"icon",e).exec();else if(i.widget){const t=d.searchUtils.findLayoutItem(r,s);t&&a.editWidgetProperty(t.widgetId,"icon",e).exec()}else if(i.section){const t=d.searchUtils.findLayoutItem(r,s);t&&a.editSectionProperty(t.sectionId,"icon",e).exec()}else if(i.screen){const t=d.searchUtils.findLayoutItem(r,s);t&&a.editScreenGroupProperty(t.screenGroupId,"icon",e).exec()}},this.focusEditTitle=e=>{this.headTitleInput.current&&(this.headTitleInput.current.select(),this.headTitleInput.current.focus())},this.getDisplay=()=>{var t;const{selection:i}=this.props,s=this.getAppConfig(),o={widget:!1,section:!1,screen:!1,layoutItem:!1,placeholder:!1,page:!1,link:!1,folder:!1,dialog:!1,noSelection:!1};if(i){const n=d.searchUtils.findLayoutItem(s,i);n?n.type===e.LayoutItemType.Widget?n.widgetId?o.widget=!0:(o.layoutItem=!0,o.placeholder=!0):n.type===e.LayoutItemType.Section&&!1!==(null===(t=i.additionalInfo)||void 0===t?void 0:t.commonSection)?o.section=!0:n.type===e.LayoutItemType.ScreenGroup?o.screen=!0:o.layoutItem=!0:o.noSelection=!0}else this.props.currentDialogId?o.dialog=!0:this.props.currentPageId?(o.page=!0,o.link=this.getPageType(this.props.currentPageId,s.pages).type===e.PageType.Link,o.folder=this.getPageType(this.props.currentPageId,s.pages).type===e.PageType.Folder):o.noSelection=!0;return o};const s={titleText:"",headTitleText:"",helpLink:"",commonWidgetList:[]},{selection:o,appConfig:n,currentPageId:a}=i;if(o){const t=d.searchUtils.findLayoutItem(n,o);t&&(t.type===e.LayoutItemType.Widget?t.widgetId&&(s.headTitleText=n.widgets[t.widgetId].label):t.type===e.LayoutItemType.Section&&(s.headTitleText=n.sections[t.sectionId].label))}else a&&(s.headTitleText=n.pages[a].label);this.state=s}componentDidMount(){this.getCommonWidgetListInfo()}getCommonWidgetListInfo(){e.WidgetManager.getInstance().getWidgetListInfo().then((e=>{this.setState({commonWidgetList:e})}))}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig}getDefaultPageIcon(e){return t.utils.getDefaultTocPageIcon(e).toString()}getDefaultDialogIcon(){return t.utils.getDefaultTocDialogIcon().toString()}getDefaultWidgetIcon(t){var i;const s=`${null===(i=null==t?void 0:t.manifest)||void 0===i?void 0:i.name}.svg`;return{svg:e.urlUtils.getAbsoluteRootUrl()+t.uri+"icon.svg",properties:{filename:s,inlineSvg:!0,originalName:`default/${s}`,path:`default/${s}`}}}onTabChange(t,i,s){i(e.appActions.widgetStatePropChange(s,"settingPanelChange",t))}renderWidgetSettings(t,s,n,a,r){var l,c,p,g,h,u;let m;const{currentSelectionIcon:f,currentSelectionTitle:v,dispatch:x}=this.props,{commonWidgetList:w}=this.state,b=null==n?void 0:n.layouts[null==a?void 0:a.layoutId],y=d.searchUtils.findLayoutItem(n,a),I=n.widgets[y.widgetId],S=I.manifest,j=(null===(l=null==S?void 0:S.publishMessages)||void 0===l?void 0:l.length)>0,C=null!==(p=null===(c=null==S?void 0:S.properties)||void 0===c?void 0:c.canConsumeDataAction)&&void 0!==p&&p,A=null===(g=w.find((e=>e.name===I.manifest.name)))||void 0===g?void 0:g.label;return m=(null==S?void 0:S.properties.hasConfig)&&(null==S?void 0:S.properties.hasConfigInSettingPage)?(0,e.jsx)(i.Tabs,{type:"underline",key:"widget-setting",className:"widget-setting flex-grow-1 w-100",fill:!0,defaultValue:"content",onChange:e=>this.onTabChange(e,x,I.id)},(0,e.jsx)(i.Tab,{id:"content",title:this.formatMessage("content"),className:"tab-title-item"},(0,e.jsx)(o,{formatMessage:this.formatMessage,dispatch:this.props.dispatch,widgetId:y.widgetId,widgetsSettingRuntimeInfo:this.props.widgetsSettingRuntimeInfo})),(0,e.jsx)(i.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle"),className:"tab-title-item"},(0,e.jsx)("div",{className:"setting-container"},(0,e.jsx)(Oe,{layoutId:a.layoutId,layoutItemId:a.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged}))),(j||C)&&(0,e.jsx)(i.Tab,{id:"action",title:this.formatMessage("action"),className:"tab-title-item"},(0,e.jsx)("div",{className:"setting-container"},(0,e.jsx)(Bt,{widgetId:y.widgetId,supportMessageAction:j,canConsumeDataAction:C,formatMessage:this.formatMessage,pageId:e.urlUtils.getAppIdPageIdFromUrl().pageId})))):(0,e.jsx)("div",{className:"h-100"},(0,e.jsx)(Oe,{layoutId:a.layoutId,layoutItemId:a.layoutItemId,formatMessage:this.formatMessage,isSingle:!0,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})),m=(0,e.jsx)("div",{css:r&&e.css`z-index: -1`,className:"w-100 h-100 d-flex flex-column widget-setting-tab","data-is-parent":!!r||void 0},(0,e.jsx)(Yt,{headTitle:v,icon:f,customIcon:this.getDefaultWidgetIcon(I),id:I.id,type:b.type===e.LayoutType.FlowLayout?"block":"widget",needIconFlip:null===(u=null===(h=null==I?void 0:I.manifest)||void 0===h?void 0:h.properties)||void 0===u?void 0:u.flipIcon,theme:t,intl:s,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:A}),(0,e.jsx)("div",{style:{flex:1,overflow:"auto"}},m)),m}render(){var s;const o=this.getAppConfig(),{selection:n,browserSizeMode:a,theme:r,intl:l,currentSelectionIcon:c,currentSelectionTitle:p}=this.props;if(!o)return(0,e.jsx)("div",{css:this.getCss(),className:"builder-dynamic-setting bg-light-300"},(0,e.jsx)(w,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,theme:this.props.theme,pageId:"empty",browserSizeMode:this.props.browserSizeMode,appTheme:this.props.theme2}));const g=this.getDisplay();let h;if(g.widget){const t=d.searchUtils.findLayoutItem(o,n);if(o.widgets[null==t?void 0:t.widgetId]){const i=t.widgetId,c=d.searchUtils.getParentWidgetIdOfContent(o,i,e.LayoutItemType.Widget,a),p=o.widgets[c];if(c&&(null===(s=null==p?void 0:p.manifest)||void 0===s?void 0:s.widgetType)!==e.WidgetType.Layout){const t=d.searchUtils.getLayoutInfosHoldcontent(o,e.LayoutItemType.Widget,c,a)[0];h=(0,e.jsx)(e.React.Fragment,null,t&&this.renderWidgetSettings(r,l,o,t,!0),this.renderWidgetSettings(r,l,o,n))}else h=(0,e.jsx)(e.React.Fragment,null,this.renderWidgetSettings(r,l,o,n))}else h=(0,e.jsx)("div",null,this.formatMessage("noSelection"))}if(g.layoutItem){const t=g.placeholder?this.formatMessage("placeholder"):this.formatMessage("daynamicLayout");h=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)("h4",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},(0,e.jsx)("div",null,t),g.placeholder&&(0,e.jsx)(Kt,{type:"placeholder",theme:r,intl:l,linkTitle:this.formatMessage("help"),ariaLabel:t})),(0,e.jsx)("div",{className:"flex-grow-1 setting-container"},(0,e.jsx)(Oe,{layoutId:n.layoutId,layoutItemId:n.layoutItemId,formatMessage:this.formatMessage,isSingle:!0,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))}if(g.section){const s=d.searchUtils.findLayoutItem(o,n),a=o.sections[s.sectionId];h=(0,e.jsx)(i.Tabs,{type:"underline",className:"flex-grow-1 section-setting",fill:!0,defaultValue:"content"},(0,e.jsx)(i.Tab,{id:"content",key:"section-setting",title:this.formatMessage("content")},(0,e.jsx)(Ie,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,appTheme:this.props.theme2,dispatch:this.props.dispatch,sectionId:a.id})),(0,e.jsx)(i.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle")},(0,e.jsx)("div",{className:"h-100 setting-container"},(0,e.jsx)(Oe,{layoutId:n.layoutId,layoutItemId:n.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))),h=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(Yt,{headTitle:p,icon:c,customIcon:t.utils.getDefaultSectionIcon().toString(),id:a.id,type:"section",theme:r,intl:l,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:p}),(0,e.jsx)("div",{className:"h-100 setting-container"},h))}if(g.screen){const i=d.searchUtils.findLayoutItem(o,n);h=(0,e.jsx)(Le,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,dispatch:this.props.dispatch,screenGroupId:i.screenGroupId}),h=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(Yt,{headTitle:p,icon:c,customIcon:t.utils.getDefaultSectionIcon().toString(),id:i.screenGroupId,type:"screen",theme:r,intl:l,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:p}),(0,e.jsx)("div",{className:"h-100 setting-container"},h))}if(g.page){h=(0,e.jsx)(w,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,pageId:this.props.currentPageId,pageMode:this.props.pageMode,maxWidth:this.props.maxPageWidth,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.theme2}),g.link?h=(0,e.jsx)(K,{dispatch:this.props.dispatch,appConfig:o,formatMessage:this.formatMessage,pageId:this.props.currentPageId}):g.folder&&(h=(0,e.jsx)(Y,{dispatch:this.props.dispatch,appConfig:o,formatMessage:this.formatMessage,pageId:this.props.currentPageId}));const{currentPageId:t}=this.props,i=o.pages[t];h=i?(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(Yt,{hideColorSelector:!0,headTitle:p,icon:c,customIcon:this.getDefaultPageIcon(i),id:i.id,type:"page",theme:r,intl:l,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:p}),(0,e.jsx)("div",{className:"h-100 setting-container single-setting"},h)):null}if(g.dialog){const{currentDialogId:t}=this.props;h=(0,e.jsx)(z,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,dialogId:t,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.theme2});const i=o.dialogs[t];h=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(Yt,{hideColorSelector:!0,headTitle:p,icon:c,customIcon:this.getDefaultDialogIcon(),id:i.id,type:"dialog",theme:r,intl:l,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:p}),(0,e.jsx)("div",{className:"h-100 setting-container single-setting"},h))}return g.noSelection&&(h=(0,e.jsx)("div",{className:"h-100"},this.formatMessage("noSelection"))),(0,e.jsx)("div",{css:this.getCss(),className:"builder-dynamic-setting bg-light-300"},(0,e.jsx)("span",{ref:this.spanText,className:"title-span-hide px-1 border h5",style:{width:"auto",position:"absolute",opacity:0,whiteSpace:"nowrap",zIndex:-1}},this.state.headTitleText||""),h)}}Qt.mapExtraStateProps=(i,s)=>{var o,n,a,r,l,c,p,g;const h=null===(o=i.appStateInBuilder)||void 0===o?void 0:o.appRuntimeInfo.currentPageId,u=null===(n=i.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo.currentDialogId,m=null===(a=i.appStateInBuilder)||void 0===a?void 0:a.appConfig;let f,v;h&&(f=null===(l=null===(r=null==m?void 0:m.pages)||void 0===r?void 0:r[h])||void 0===l?void 0:l.mode,v=null===(p=null===(c=null==m?void 0:m.pages)||void 0===c?void 0:c[h])||void 0===p?void 0:p.maxWidth);const x=null===(g=i.appStateInBuilder)||void 0===g?void 0:g.appRuntimeInfo.selection,{icon:w,title:b}=function(i,s,o,n){var a,r;let l,c;if(i){const s=d.searchUtils.findLayoutItem(n,i);if(s)if(s.type===e.LayoutItemType.Widget){if(s.widgetId){const t=n.widgets[s.widgetId],o=n.layouts[i.layoutId];c=t&&t.label,l=o.type!==e.LayoutType.FlowLayout||(null===(a=s.setting)||void 0===a?void 0:a.isFloating)?t&&t.icon:"string"!=typeof(null==t?void 0:t.icon)&&(null==t?void 0:t.icon)||_t}}else if(s.type===e.LayoutItemType.Section){if(s.sectionId){const e=n.sections[s.sectionId];c=null==e?void 0:e.label,l=(null==e?void 0:e.icon)||t.utils.getDefaultSectionIcon().toString()}}else if(s.type===e.LayoutItemType.ScreenGroup&&s.screenGroupId){const e=n.screenGroups[s.screenGroupId];c=null==e?void 0:e.label,l=null!==(r=null==e?void 0:e.icon)&&void 0!==r?r:Jt}}else if(n)if(s){const e=n.dialogs[s];e&&(c=e.label,l=e.icon||t.utils.getDefaultTocDialogIcon())}else if(o){const e=n.pages[o];e&&(c=e.label,l=e.icon||t.utils.getDefaultTocPageIcon(e))}return{icon:l,title:c}}(x,u,h,m);return{currentPageId:h,pageMode:f,maxPageWidth:v,widgetsSettingRuntimeInfo:i.builder.widgetsSettingRuntimeInfo,currentDialogId:u,selection:x,browserSizeMode:i.appStateInBuilder&&i.appStateInBuilder.browserSizeMode,currentSelectionIcon:w,currentSelectionTitle:b}}})(),v})())}}}));